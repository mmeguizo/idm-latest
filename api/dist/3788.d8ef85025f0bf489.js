"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[3788],{3788:(Kt,w,c)=>{c.r(w),c.d(w,{UserModule:()=>Qt});var F=c(5965),f=c(8645),u=c(9773),e=c(9212),C=c(1187),x=c(1931),v=c(5355),g=c(6814),k=c(9252),S=c(4227);function ee(a,s){if(1&a&&(e.TgZ(0,"div",12),e._uU(1),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.hij(" ",(null==t.goals?null:t.goals.goalCount)||"0"," ")}}function te(a,s){1&a&&e._UZ(0,"p-skeleton",13)}function ie(a,s){if(1&a&&(e.TgZ(0,"span",14),e._uU(1,"Active : "),e.qZA(),e.TgZ(2,"span",15),e._uU(3),e.qZA(),e.TgZ(4,"span",14),e._uU(5,"Deleted : "),e.qZA(),e.TgZ(6,"span",16),e._uU(7),e.qZA()),2&a){const t=e.oxw();e.xp6(3),e.hij("",(null==t.goals?null:t.goals.goalCount)||0," - "),e.xp6(4),e.hij("",(null==t.goals?null:t.goals.goalDeletedCount)||0," ")}}function oe(a,s){1&a&&e._UZ(0,"p-skeleton",17)}const ae=()=>({width:"2.5rem",height:"2.5rem"});let M=(()=>{class a{constructor(t,o,i){this.goalService=t,this.obj=o,this.authService=i,this.getDashboardSubscription=new f.x}ngOnInit(){this.userId=this.authService.getTokenUserID(),this.getAllGoals(),this.getAllObjectives(),this.getObjectiveViewPieChart()}ngOnDestroy(){this.getDashboardSubscription.unsubscribe()}getAllGoals(){this.goalService.getRoute("get","goals",`getGoalsForUserDashboard/${this.userId}`).pipe((0,u.R)(this.getDashboardSubscription)).subscribe(t=>{this.goals=t.data[0]})}getAllObjectives(){this.obj.getRoute("get","objectives",`getAllObjectivesForDashboard/${this.userId}`).pipe((0,u.R)(this.getDashboardSubscription)).subscribe(t=>{this.objectivesData=t.data[0],this.initChartsDoughnut({complete:t.data[0].objectiveCompleted,uncomplete:t.data[0].objectiveUncompleted})})}getObjectiveViewPieChart(){this.goalService.getRoute("get","goals",`getObjectivesViewTable/${this.userId}`).pipe((0,u.R)(this.getDashboardSubscription)).subscribe(t=>{this.initBarCharts(t?.data)})}initChartsDoughnut(t){const o=getComputedStyle(document.documentElement),i=o.getPropertyValue("--text-color");this.objectiveDoughnutData={labels:["Complete","In Progress"],datasets:[{data:[t.complete,t.uncomplete],backgroundColor:[o.getPropertyValue("--blue-500"),o.getPropertyValue("--yellow-500"),o.getPropertyValue("--green-500")],hoverBackgroundColor:[o.getPropertyValue("--blue-400"),o.getPropertyValue("--yellow-400"),o.getPropertyValue("--green-400")]}]},this.options={cutout:"65%",plugins:{legend:{labels:{color:i}}}}}initBarCharts(t){t?.map(p=>p.objectives);let i=t?.map(p=>p.objectives.filter(_=>0==_.deleted));const l=getComputedStyle(document.documentElement),n=l.getPropertyValue("--text-color"),d=l.getPropertyValue("--text-color-secondary"),m=l.getPropertyValue("--surface-border");this.barData={labels:[...t?.map(p=>p.goals)],datasets:[{label:"Goals",backgroundColor:l.getPropertyValue("--primary-500"),borderColor:l.getPropertyValue("--primary-500"),data:[...t?.map(p=>1)]},{label:"Objectives",backgroundColor:l.getPropertyValue("--primary-200"),borderColor:l.getPropertyValue("--primary-200"),data:[...i.map(p=>p.length?p.length:0)]}]},this.barOptions={plugins:{legend:{labels:{fontColor:n}}},scales:{x:{ticks:{color:d,font:{weight:500}},grid:{display:!1,drawBorder:!1}},y:{ticks:{color:d},grid:{color:m,drawBorder:!1}}}}}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(C.O),e.Y36(x.v),e.Y36(v.e))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-admin-dashboard"]],decls:26,vars:8,consts:[[1,"grid"],[1,"col-12","lg:col-6","xl:col-3","cursor-pointer"],[1,"card","mb-0"],[1,"flex","justify-content-between","mb-3"],[1,"block","text-500","font-medium","mb-3"],["class","text-900 font-medium text-xl"],[1,"flex","align-items-center","justify-content-center","bg-purple-100","border-round",3,"ngStyle"],[1,"pi","pi-compass","text-purple-500","text-xl"],[1,"col-12","xl:col-6"],[1,"card"],["type","bar",3,"data","options"],["type","doughnut",3,"data","options"],[1,"text-900","font-medium","text-xl"],["shape","circle","size","3rem","styleClass","mr-2"],[1,"text-500"],[1,"text-green-500","font-medium"],[1,"text-red-500","font-medium"],["width","12rem","height","2rem"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"span",4),e._uU(6,"Goals"),e.qZA(),e.YNc(7,ee,2,1,"div",5)(8,te,1,0),e.qZA(),e.TgZ(9,"div",6),e._UZ(10,"i",7),e.qZA()(),e.YNc(11,ie,8,2)(12,oe,1,0),e.qZA()(),e._UZ(13,"div",1)(14,"div",1)(15,"div",1),e.TgZ(16,"div",8)(17,"div",9)(18,"h5"),e._uU(19,"Bar Chart"),e.qZA(),e._UZ(20,"p-chart",10),e.qZA()(),e.TgZ(21,"div",8)(22,"div",9)(23,"h5"),e._uU(24,"Objective Status"),e.qZA(),e._UZ(25,"p-chart",11),e.qZA()()()),2&o&&(e.xp6(7),e.um2(7,i.goals?7:8),e.xp6(2),e.Q6J("ngStyle",e.DdM(7,ae)),e.xp6(2),e.um2(11,i.goals?11:12),e.xp6(9),e.Q6J("data",i.barData)("options",i.barOptions),e.xp6(5),e.Q6J("data",i.objectiveDoughnutData)("options",i.options))},dependencies:[g.PC,k.C,S.O]})}return a})();var b=c(5861),r=c(95),h=c(5219),le=c(9907),P=c(6116),A=c(3722),ne=c(9305),se=c(705),I=c(3259),Z=c(9552),j=c(707),J=c(3530),N=c(6760),R=c(3714),H=c(3965),L=c(5167),re=c(4104),B=c(1494),E=c(6651),de=c(2169),ce=c(8454),Q=c(4532),pe=c(6263),T=c(2162);const ue=["filter"];function ge(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",67)(1,"button",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),l=e.MAs(9);return e.KtG(i.clear(l))}),e.qZA(),e.TgZ(2,"span",69),e._UZ(3,"i",70),e.TgZ(4,"input",71,72),e.NdJ("input",function(i){e.CHM(t);const l=e.oxw(),n=e.MAs(9);return e.KtG(l.onGlobalFilter(n,i))}),e.qZA()()()}}function me(a,s){1&a&&(e.TgZ(0,"tr")(1,"th",73)(2,"div",74),e._uU(3," Goals "),e._UZ(4,"p-columnFilter",75),e.qZA()(),e.TgZ(5,"th",73)(6,"div",74),e._uU(7," Budget Utilization "),e._UZ(8,"p-columnFilter",76),e.qZA()(),e.TgZ(9,"th",73)(10,"div",74),e._uU(11," Department "),e._UZ(12,"p-columnFilter",77),e.qZA()(),e.TgZ(13,"th",73)(14,"div",74),e._uU(15," Campus "),e._UZ(16,"p-columnFilter",78),e.qZA()(),e.TgZ(17,"th",73)(18,"div",74),e._uU(19," Created By "),e._UZ(20,"p-columnFilter",79),e.qZA()(),e.TgZ(21,"th",73)(22,"div",74),e._uU(23," Created Date "),e._UZ(24,"p-columnFilter",80),e.qZA()(),e.TgZ(25,"th",73)(26,"div",74),e._uU(27," Progress Completion "),e.qZA()(),e.TgZ(28,"th",73)(29,"div",74),e._uU(30," Options "),e.qZA()()())}function be(a,s){if(1&a&&(e.TgZ(0,"div",92)(1,"span"),e._UZ(2,"i",93),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"peso"),e._UZ(8,"p-tag",94),e.qZA(),e._UZ(9,"hr"),e.qZA()),2&a){const t=s.$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,4,t.clients.substring(0,12)+"....")," : "),e.xp6(3),e.hij("",e.lcZ(7,6,t.budget)," - "),e.xp6(2),e.Q6J("severity",t.complete?"success":"warning")("value",t.complete?"Completed":"In Progress")}}function he(a,s){1&a&&(e.TgZ(0,"div")(1,"span"),e._uU(2,"No Project Yet : "),e._UZ(3,"i",95),e.qZA()())}const _e=()=>({width:"400px"});function fe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"button",81),e.NdJ("click",function(){const l=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.getObjectives(l.id,l._id,l.goals,l.remainingBudget,l))}),e._uU(3),e.ALo(4,"titlecase"),e.qZA()(),e.TgZ(5,"td")(6,"p-chip",82),e.NdJ("click",function(i){e.CHM(t);const l=e.MAs(8);return e.KtG(l.toggle(i))}),e.qZA(),e.TgZ(7,"p-overlayPanel",null,83)(9,"p-card",84),e.ALo(10,"peso"),e.ALo(11,"peso"),e.YNc(12,be,10,8,"div",85),e._uU(13," \xa0 \xa0 "),e.YNc(14,he,4,0,"div",66),e.qZA()()(),e.TgZ(15,"td"),e._uU(16),e.ALo(17,"titlecase"),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.ALo(20,"titlecase"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.ALo(23,"titlecase"),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.ALo(26,"date"),e.qZA(),e.TgZ(27,"td")(28,"div",86),e._UZ(29,"p-progressBar",87),e.qZA()(),e.TgZ(30,"td")(31,"div",88)(32,"i",89),e.NdJ("click",function(){const l=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.updateGoal(l))}),e.qZA(),e.TgZ(33,"i",90),e.NdJ("click",function(i){const n=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.deleteGoalDialog(i,n._id))}),e.qZA()(),e._UZ(34,"p-confirmPopup",91),e.qZA()()}if(2&a){const t=s.$implicit;e.xp6(3),e.hij(" ",e.lcZ(4,14,t.goals)," "),e.xp6(6),e.Akn(e.DdM(29,_e)),e.Q6J("header",e.lcZ(10,16,t.budget))("subheader","Budget Utilization:  "+(t.remainingPercentage||0)+"% |  Remaining: "+e.lcZ(11,18,t.remainingBudget||"0")),e.xp6(3),e.Q6J("ngForOf",t.objectivesDetails),e.xp6(2),e.Q6J("ngIf",!t.objectivesDetails),e.xp6(2),e.hij(" ",e.lcZ(17,20,t.department)," "),e.xp6(3),e.hij(" ",e.lcZ(20,22,t.campus)," "),e.xp6(3),e.hij(" ",e.lcZ(23,24,t.users.username)," "),e.xp6(3),e.hij(" ",e.xi3(26,26,t.createdAt,"mediumDate")," "),e.xp6(4),e.Q6J("color","#1da750")("value",t.CompletePercentage)("showValue",!0)}}function ve(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",96),e._uU(2,"No Goals found."),e.qZA()())}function Ze(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",96),e._uU(2,"Loading Goals data. Please wait."),e.qZA()())}function Ce(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",67)(1,"button",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),l=e.MAs(71);return e.KtG(i.clear(l))}),e.qZA(),e.TgZ(2,"p-button",97),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addSubGoal(i.objectiveData))}),e.qZA(),e.TgZ(3,"p-button",98),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.printTableNeeds((null==i.subOnjectiveHeaderData?null:i.subOnjectiveHeaderData.department)||""))}),e.qZA(),e.TgZ(4,"span",69),e._UZ(5,"i",70),e.TgZ(6,"input",71,72),e.NdJ("input",function(i){e.CHM(t);const l=e.oxw(),n=e.MAs(71);return e.KtG(l.onGlobalFilter(n,i))}),e.qZA()()()}2&a&&(e.xp6(2),e.Q6J("outlined",!0),e.xp6(1),e.Q6J("outlined",!0))}function xe(a,s){1&a&&(e.TgZ(0,"tr")(1,"th",73)(2,"div",74),e._uU(3," Functional Objective "),e._UZ(4,"p-columnFilter",99),e.qZA()(),e.TgZ(5,"th",73)(6,"div",74),e._uU(7," Performance Indicator "),e._UZ(8,"p-columnFilter",100),e.qZA()(),e.TgZ(9,"th",73)(10,"div",74),e._uU(11," Target "),e._UZ(12,"p-columnFilter",101),e.qZA()(),e.TgZ(13,"th",73)(14,"div",74),e._uU(15," Formula "),e._UZ(16,"p-columnFilter",102),e.qZA()(),e.TgZ(17,"th",73)(18,"div",74),e._uU(19," Programs "),e._UZ(20,"p-columnFilter",103),e.qZA()(),e.TgZ(21,"th",73)(22,"div",74),e._uU(23," Responsible Persons "),e._UZ(24,"p-columnFilter",104),e.qZA()(),e.TgZ(25,"th",73)(26,"div",74),e._uU(27," Clients "),e._UZ(28,"p-columnFilter",105),e.qZA()(),e.TgZ(29,"th",73)(30,"div",74),e._uU(31," Timetable "),e._UZ(32,"p-columnFilter",106),e.qZA()(),e.TgZ(33,"th",107)(34,"div",74),e._uU(35," Frequency Monitoring "),e._UZ(36,"p-columnFilter",108),e.qZA()(),e.TgZ(37,"th",73)(38,"div",74),e._uU(39," Data Source "),e._UZ(40,"p-columnFilter",109),e.qZA()(),e.TgZ(41,"th",73)(42,"div",74),e._uU(43," Budget "),e._UZ(44,"p-columnFilter",76),e.qZA()(),e.TgZ(45,"th",73)(46,"div",74),e._uU(47," Created At "),e._UZ(48,"p-columnFilter",80),e.qZA()(),e.TgZ(49,"th",73)(50,"div",74),e._uU(51," Submitted "),e._UZ(52,"p-columnFilter",110),e.qZA()(),e.TgZ(53,"th",111)(54,"div",74),e._uU(55," Files "),e._UZ(56,"p-columnFilter",112),e.qZA()(),e.TgZ(57,"th",113)(58,"div",74),e._uU(59," Options "),e.qZA()()())}function je(a,s){if(1&a){const t=e.EpF();e._uU(0," \xa0 \xa0 "),e.TgZ(1,"i",121),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.viewFilesHistory(i))}),e.qZA()}}function ye(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"titlecase"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"titlecase"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"titlecase"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.ALo(21,"titlecase"),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.ALo(24,"date"),e.ALo(25,"date"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.ALo(28,"titlecase"),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.ALo(31,"titlecase"),e.qZA(),e.TgZ(32,"td"),e._uU(33),e.ALo(34,"peso"),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.ALo(37,"date"),e.qZA(),e.TgZ(38,"td")(39,"p-button",114),e.NdJ("loadingChange",function(i){const n=e.CHM(t).rowIndex,d=e.oxw();return e.KtG(d.onclickCompletionButton[n]=i)})("click",function(i){const l=e.CHM(t),n=l.$implicit,d=l.rowIndex,m=e.oxw();return e.KtG(m.updateObjectiveComplete(i,n,d,n.complete))}),e.qZA(),e._UZ(40,"p-confirmPopup",115,116),e.qZA(),e.TgZ(42,"td")(43,"div",117)(44,"i",118),e.NdJ("click",function(){const l=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.viewFiles(l))}),e.qZA(),e.YNc(45,je,2,0,"i",119),e.qZA()(),e.TgZ(46,"td")(47,"div",88)(48,"i",89),e.NdJ("click",function(){const l=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.updateSubGoal(l))}),e.qZA(),e.TgZ(49,"i",90),e.NdJ("click",function(){const l=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.deleteSubGoal(l.id,l.goalId))}),e.qZA(),e._UZ(50,"p-confirmPopup",120),e.qZA()()()}if(2&a){const t=s.$implicit,o=s.rowIndex,i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,23,t.functional_objective)," "),e.xp6(3),e.hij(" ",e.lcZ(6,25,t.performance_indicator)," "),e.xp6(3),e.hij(" ",e.lcZ(9,27,t.target)," "),e.xp6(3),e.hij(" ",e.lcZ(12,29,t.formula)," "),e.xp6(3),e.hij(" ",e.lcZ(15,31,t.programs)," "),e.xp6(3),e.hij(" ",e.lcZ(18,33,t.responsible_persons)," "),e.xp6(3),e.hij(" ",e.lcZ(21,35,t.clients)," "),e.xp6(3),e.AsE(" ",e.xi3(24,37,null==t?null:t.timetable[0],"shortDate")," - ",e.xi3(25,40,null==t?null:t.timetable[1],"shortDate")," "),e.xp6(4),e.hij(" ",e.lcZ(28,43,t.frequency_monitoring)," "),e.xp6(3),e.hij(" ",e.lcZ(31,45,t.data_source)," "),e.xp6(3),e.hij(" ",e.lcZ(34,47,t.budget)," "),e.xp6(3),e.hij(" ",e.xi3(37,49,t.createdAt,"mediumDate")," "),e.xp6(3),e.Q6J("text",!0)("raised",!0)("severity",t.complete?"success":"warning")("icon",t.complete?"pi pi-check":"pi pi-times")("label",t.complete?"Yes":"No")("disabled",!("user"!==i.role||!t.complete))("pTooltip","user"===i.role?"Only Admin can enable this button":"")("tooltipPosition",i.top)("loading",i.onclickCompletionButton[o]),e.xp6(6),e.um2(45,"admin"===i.role?45:-1)}}function Ae(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",96),e._uU(2,"No Objectives found."),e.qZA()())}function Te(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",96),e._uU(2," Loading Objectives data. Please wait. "),e.qZA()())}function Oe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",67)(1,"button",122),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),l=e.MAs(133);return e.KtG(i.clear(l))}),e.qZA(),e.TgZ(2,"p-button",123),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addFiles())}),e.qZA(),e.TgZ(3,"span",69),e._UZ(4,"i",70),e.TgZ(5,"input",124,72),e.NdJ("input",function(i){e.CHM(t);const l=e.oxw(),n=e.MAs(133);return e.KtG(l.onGlobalFilter(n,i))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.blockedPanel),e.xp6(1),e.Q6J("disabled",t.blockedPanel)("outlined",!0),e.xp6(3),e.Q6J("disabled",t.blockedPanel)}}function Ge(a,s){1&a&&(e.TgZ(0,"tr")(1,"th",73)(2,"div",74),e._uU(3," File "),e.qZA()(),e.TgZ(4,"th",73)(5,"div",74),e._uU(6," Date Added "),e.qZA()(),e.TgZ(7,"th",113)(8,"div",74),e._uU(9," Options "),e.qZA()()())}function Ue(a,s){1&a&&e._UZ(0,"i",129)}function qe(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"i",90),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.deleteSubGoalFile(i.id,i.source))}),e.qZA()}}function De(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td")(2,"a",125),e._UZ(3,"i",126),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"td")(8,"div",88),e.YNc(9,Ue,1,0,"i",127)(10,qe,1,0),e._UZ(11,"p-confirmPopup",128),e.qZA()()()),2&a){const t=s.$implicit,o=e.oxw();e.xp6(2),e.Q6J("href",o.auth.domain+"/images/files/"+t.source,e.LSH),e.xp6(1),e.Q6J("ngClass",o.getIcon(t.source.split(".").pop().toLowerCase())),e.xp6(2),e.hij(" ",e.xi3(6,4,t.date_added,"mediumDate")," "),e.xp6(4),e.um2(9,o.blockedPanel?9:10)}}function we(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",96),e._uU(2,"No Files found."),e.qZA()())}function Fe(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",96),e._uU(2,"Loading Files data. Please wait."),e.qZA()())}function ke(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"p-button",130),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hideViewFileDialogCard())}),e.qZA()}2&a&&e.Q6J("text",!0)}function Se(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",67)(1,"button",68),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),l=e.MAs(133);return e.KtG(i.clear(l))}),e.qZA(),e.TgZ(2,"span",69),e._UZ(3,"i",70),e.TgZ(4,"input",71,72),e.NdJ("input",function(i){e.CHM(t);const l=e.oxw(),n=e.MAs(133);return e.KtG(l.onGlobalFilter(n,i))}),e.qZA()()()}}function Me(a,s){1&a&&(e.TgZ(0,"tr")(1,"th",73)(2,"div",74),e._uU(3," File "),e.qZA()(),e.TgZ(4,"th",73)(5,"div",74),e._uU(6," Date Added "),e.qZA()(),e.TgZ(7,"th",73)(8,"div",74),e._uU(9," Date Deleted "),e.qZA()(),e.TgZ(10,"th",73)(11,"div",74),e._uU(12," Status "),e.qZA()()())}function Pe(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td")(2,"a",125),e._UZ(3,"i",126),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.ALo(10,"date"),e.qZA()(),e.TgZ(11,"td")(12,"span"),e._uU(13),e.qZA()()()),2&a){const t=s.$implicit,o=e.oxw();e.xp6(2),e.Q6J("href",o.auth.domain+"/images/files/"+t.source,e.LSH),e.xp6(1),e.Q6J("ngClass",o.getIcon(t.source.split(".").pop().toLowerCase())),e.xp6(2),e.hij(" ",e.xi3(6,9,t.date_added,"medium")," "),e.xp6(3),e.Tol("cursor-pointer  customer-badge status-"+(t.status?"active":"inactive")),e.xp6(1),e.hij(" ",e.xi3(10,12,t.updatedAt,"medium"),""),e.xp6(3),e.Tol("cursor-pointer  customer-badge status-"+(t.status?"active":"inactive")),e.xp6(1),e.Oqu(t.status?"Active":"Deleted")}}function Ie(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",96),e._uU(2,"No Files found."),e.qZA()())}function Je(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",96),e._uU(2,"Loading Files data. Please wait."),e.qZA()())}function Ne(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"p-button",130),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hideViewFileHistoryDialogCard())}),e.qZA()}2&a&&e.Q6J("text",!0)}function Re(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"titlecase"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"titlecase"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"titlecase"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"titlecase"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.ALo(21,"titlecase"),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.ALo(24,"date"),e.ALo(25,"date"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.ALo(28,"titlecase"),e.qZA(),e.TgZ(29,"td"),e._uU(30),e.ALo(31,"titlecase"),e.qZA(),e.TgZ(32,"td"),e._uU(33),e.ALo(34,"peso"),e.qZA()()),2&a){const t=s.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,12,t.functional_objective)),e.xp6(3),e.Oqu(e.lcZ(6,14,t.performance_indicator)),e.xp6(3),e.Oqu(e.lcZ(9,16,t.target)),e.xp6(3),e.Oqu(e.lcZ(12,18,t.formula)),e.xp6(3),e.Oqu(e.lcZ(15,20,t.programs)),e.xp6(3),e.Oqu(e.lcZ(18,22,t.responsible_persons)),e.xp6(3),e.Oqu(e.lcZ(21,24,t.clients)),e.xp6(3),e.AsE(" ",e.xi3(24,26,t.timetable[0],"MMM d yyyy")," - ",e.xi3(25,29,t.timetable[1],"MMM d yyyy")," "),e.xp6(4),e.Oqu(e.lcZ(28,32,t.frequency_monitoring)),e.xp6(3),e.Oqu(e.lcZ(31,34,t.data_source)),e.xp6(3),e.Oqu(e.lcZ(34,36,t.budget))}}function He(a,s){if(1&a&&(e.TgZ(0,"tbody"),e.YNc(1,Re,35,38,"tr",131),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.objectiveDatas)}}const Le=()=>["goals","budget","department","campus","users.username","createdAt","options"],G=()=>({width:"25rem"}),U=()=>({width:"60rem"}),y=()=>({"1199px":"75vw","575px":"90vw"}),Be=()=>["","functional_objective","performance_indicator","target","formula","programs","department","responsible_persons","clients","timetable","frequency_monitoring","data_source","budget","createdAt","Files","options"],q=()=>({"min-width":"50rem"}),V=()=>({width:"50rem"}),Y=()=>["name","code","options"],Ee=a=>({hidden:a});let Qe=(()=>{class a{constructor(t,o,i,l,n,d,m,p,_,Vt,Yt,zt){this.messageService=t,this.formBuilder=o,this.confirmationService=i,this.goal=l,this.auth=n,this.obj=d,this.dept=m,this.fileService=p,this.fileUpload=_,this.camp=Vt,this.changeDetectorRef=Yt,this.pdfService=zt,this.getGoalSubscription=new f.x,this.goals=[],this.Alldepts=[],this.AllObjectivesFiles=[],this.AllObjectivesHistoryFiles=[],this.ViewBudget=[],this.deptDropdownCampusValue=[],this.loading=!0,this.uploadedFiles=[],this.deptDropdownValue=[],this.ObjectivesGoals=[],this.subGoalObjective=!1,this.addGoalDialogCard=!1,this.addObjectiveGoalDialogCard=!1,this.updateGoalDialogCard=!1,this.viewObjectiveFileDialogCard=!1,this.viewObjectiveFileHistoryDialogCard=!1,this.valSwitch=!1,this.value=0,this.goalDataRemainingBudget=0,this.goalBudget=0,this.onclickCompletionButton=[],this.toPrint=!1,this.isPrintableVisible=!1,this.printingHead=!1,this.nameValue="",this.officeValue="",this.printingOfficeName="",this.USERID=this.auth.getTokenUserID(),this.role=this.auth.getUserRole(),this.userCampus=this.auth.getUserCampus(),this.userDepartment=this.auth.getUserDepartment()}ngOnInit(){this.getAllObjectivesWithObjectives(),this.getAllDept(),this.dropdwonSelection=[{name:"daily",code:"Daily"},{name:"weekly",code:"Weekly"},{name:"monthly",code:"Monthly"},{name:"yearly",code:"Yearly"},{name:"quarterly",code:"Quarterly"},{name:"biannually",code:"Biannually"}],this.cols=[{field:"goals",header:"Goals"},{field:"budget",header:"Budget"},{field:"department",header:"Department"},{field:"campus",header:"Campus"},{field:"createdBy",header:"CreatedBy"},{field:"createdAt",header:"CreatedAt"},{field:"options",header:"Options"}],this.createAddGoalForm(),this.createUpdateGoalForm(),this.createAddObjectiveGoalform(),this.createaddFileForm(),this.getAllCampuses(),this.formGroupDropdown=new r.cw({selectedDropdown:new r.NI}),this.formGroupDemo=new r.cw({selectDepartment:new r.NI}),this.formGroupCampus=new r.cw({selectedCampus:new r.NI}),this.interval=setInterval(()=>{this.value=this.value+Math.floor(10*Math.random())+1,this.value>=100&&(this.value=100,clearInterval(this.interval))},2e3)}ngOnDestroy(){this.getGoalSubscription.unsubscribe()}createAddGoalForm(){this.addGoalform=this.formBuilder.group({goals:["",[r.kI.required]],budget:["",[r.kI.required]],campus:["",[r.kI.required]],department:["",[r.kI.required]]})}createaddFileForm(){this.addFileForm=this.formBuilder.group({files:["",[r.kI.required]]})}createAddObjectiveGoalform(){this.addObjectiveGoalform=this.formBuilder.group({userId:["",[r.kI.required]],goalId:["",[r.kI.required]],functional_objective:["",[r.kI.required]],performance_indicator:["",[r.kI.required]],target:["",[r.kI.required]],formula:["",[r.kI.required]],programs:["",[r.kI.required]],responsible_persons:["",[r.kI.required]],clients:["",[r.kI.required]],timetable:["",[r.kI.required]],frequency_monitoring:["",[r.kI.required]],data_source:["",[r.kI.required]],budget:["",[r.kI.required]]})}createUpdateGoalForm(){this.updateGoalform=this.formBuilder.group({goals:["",[r.kI.required]],budget:["",[r.kI.required]],campus:["",[r.kI.required]]})}getAllCampuses(){this.camp.getRoute("get","campus","getAllCampus").pipe((0,u.R)(this.getGoalSubscription)).subscribe(t=>{this.deptDropdownCampusValue=t.data[0]})}getAllObjectivesWithObjectives(){this.goal.getRoute("get","goals","getAllObjectivesWithObjectives/"+this.USERID).pipe((0,u.R)(this.getGoalSubscription)).subscribe(t=>{this.goals=t.goals,this.loading=!1})}getAllDept(){this.dept.getRoute("get","department","getAllDepartmentDropdown").pipe((0,u.R)(this.getGoalSubscription)).subscribe(t=>{this.deptDropdownValue=t.data[0]})}getObjectives(t,o="",i="",l=0,n=[]){var d=this;return(0,b.Z)(function*(){d.subObjectiveGoalID=t,d.goal_ObjectId=o||n._id||"",d.subGoalObjective=!0,d.subOnjectiveHeaderData=n,d.goalDataRemainingBudget=l||d.subOnjectiveHeaderData?.remainingBudget,d.goalBudget=d.subOnjectiveHeaderData?.budget,d.subObjectiveHeaders=d.customTitleCase(i||d.subObjectiveHeaders||""),t&&(d.loading=!0,d.obj.getRoute("get","objectives",`getAllByIdObjectives/${t}`).pipe((0,u.R)(d.getGoalSubscription)).subscribe(m=>{d.objectiveDatas=m.Objectives;for(let p=0;p<d.objectiveDatas.length.length;p++)d.onclickCompletionButton[p]=!1;d.loading=!1}))})()}getObjectivesReload(t){var o=this;return(0,b.Z)(function*(){t&&(o.loading=!0,o.obj.getRoute("get","objectives",`getAllByIdObjectives/${t}/${o.USERID}`).pipe((0,u.R)(o.getGoalSubscription)).subscribe(i=>{o.objectiveDatas=i.Objectives;let l=i.Objectives.reduce((n,d)=>n+d.budget,0);o.goalDataRemainingBudget=o.goalBudget-l,o.changeDetectorRef.detectChanges();for(let n=0;n<o.objectiveDatas.length.length;n++)o.onclickCompletionButton[n]=!1;o.loading=!1}))})()}getAllFilesFromObjectiveLoad(t,o){var i=this;return(0,b.Z)(function*(){return i.loading=!0,i.fileService.getAllFilesFromObjective(t,o).pipe((0,u.R)(i.getGoalSubscription)).subscribe(l=>{i.AllObjectivesFiles=l.data,i.loading=!1}),!0})()}getAllFilesHistoryFromObjectiveLoad(t,o){var i=this;return(0,b.Z)(function*(){return i.loading=!0,i.fileService.getAllFilesHistoryFromObjectiveLoad(t,o).pipe((0,u.R)(i.getGoalSubscription)).subscribe(l=>{i.AllObjectivesHistoryFiles=l.data,i.loading=!1}),!0})()}addSubGoal(t){this.addObjectiveGoalDialogCard=!0}addGoal(){this.addGoalDialogCard=!0}addFiles(t){this.addObjectiveFileDialogCard=!0}addGoalDialogExec(t){this.userID=this.USERID,this.goal.getRoute("post","goals","addGoals",{goals:t.value.goals,budget:t.value.budget,campus:this.userCampus,department:this.userDepartment,createdBy:this.userID}).pipe((0,u.R)(this.getGoalSubscription)).subscribe(i=>{i.success?(this.getAllObjectivesWithObjectives(),this.messageService.add({severity:"success  ",summary:"Done",detail:i.message}),this.addGoalDialogCard=!1,this.addGoalform.reset()):this.messageService.add({severity:"error  ",summary:"Error",detail:i.message})})}addSubObjectiveGoalDialogExec(t){t.value.userId=this.USERID,t.value.goalId=this.subObjectiveGoalID,t.value.goal_Id=this.goal_ObjectId,t.value.frequency_monitoring=this.formGroupDropdown.value.selectedDropdown.name,t.value.createdBy=this.USERID,this.obj.getRoute("post","objectives","addObjectives",t.value).pipe((0,u.R)(this.getGoalSubscription)).subscribe(o=>{o.success?(this.addObjectiveGoalDialogCard=!1,this.getAllObjectivesWithObjectives(),this.getObjectivesReload(this.subObjectiveGoalID),this.messageService.add({severity:"success  ",summary:"Done",detail:o.message}),this.goal_ObjectId=o.data.goal_Id,this.addObjectiveGoalform.reset(),this.formGroupDropdown.reset(),this.goalDataRemainingBudget=0):this.messageService.add({severity:"warn  ",summary:"Error",detail:o.message})})}updateGoalDialogExec(t){this.goal.getRoute("put","goals","updateGoals",{id:this.updateGoalID,goals:t.value.goals,budget:t.value.budget,department:this.userDepartment,campus:this.userCampus}).pipe((0,u.R)(this.getGoalSubscription)).subscribe(i=>{i.success?(this.getAllObjectivesWithObjectives(),this.messageService.add({severity:"success  ",summary:"Done",detail:i.message}),this.updateGoalDialogCard=!1,this.updateGoalform.reset()):this.messageService.add({severity:"error  ",summary:"Error",detail:i.message})})}updateGoal(t){this.updateGoalDialogCard=!0,this.updateGoalID=t.id,this.formGroupDemo.setValue({selectDepartment:this.deptDropdownValue.find(o=>o.name===t.department)}),this.formGroupCampus.setValue({selectedCampus:this.deptDropdownCampusValue.find(o=>o.name===t.campus)}),this.updateGoalform=this.formBuilder.group({goals:[t.goals||"",[r.kI.required]],budget:[t.budget||0,[r.kI.required]]})}updateSubGoal(t){this.tobeUpdatedSubGoal=t.id,this.addObjectiveGoalform.reset(),this.updateObjectiveGoalFlag=!0,this.addObjectiveGoalDialogCard=!0,this.formGroupDropdown.setValue({selectedDropdown:this.dropdwonSelection.find(o=>o.name===t.frequency_monitoring)||{name:"daily",code:"Daily"}}),this.addObjectiveGoalform.patchValue({userId:t.userId,goalId:t.goalId,functional_objective:t.functional_objective,performance_indicator:t.performance_indicator,target:t.target,formula:t.formula,programs:t.programs,responsible_persons:t.responsible_persons,clients:t.clients,timetable:[new Date(t.timetable[0]),new Date(t.timetable[1])],frequency_monitoring:t.frequency_monitoring,data_source:t.data_source,budget:t.budget})}updateObjectiveComplete(t,o,i=0,l){var n=this;this.onclickCompletionButton[i]=!0;let d=o.goalId;if(!0===l&&"user"===this.role)return this.messageService.add({severity:"error  ",summary:"Nice Try!!!",detail:"Only Admin can enable this.."}),void(this.onclickCompletionButton[i]=!1);this.confirmationService.confirm({key:"updateObjectiveComplete",target:t.target,message:"Marking Objective "+(l?"as Incomplete":" as Complete? Will Lock Files only Admin can re enable"),header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.obj.getRoute("put","objectives","updateobjectivecompletion",{id:o.id}).pipe((0,u.R)(this.getGoalSubscription)).subscribe(function(){var m=(0,b.Z)(function*(p){p.success?(n.getAllObjectivesWithObjectives(),n.getObjectivesReload(d),n.messageService.add({severity:"success  ",summary:"Done",detail:p.message,life:5e3}),n.hideviewObjectiveFileDialogCardID=d):n.messageService.add({severity:"error  ",summary:"Error",detail:p.message})});return function(p){return m.apply(this,arguments)}}()),this.onclickCompletionButton[i]=!1},reject:()=>{this.onclickCompletionButton[i]=!1,this.messageService.add({severity:"info",summary:"Done",detail:"Nothing happens",life:3e3})}})}updateSubObjectiveGoalDialogExec(t){t.value.id=this.tobeUpdatedSubGoal,t.value.frequency_monitoring=this.formGroupDropdown.value.selectedDropdown.name,this.obj.getRoute("put","objectives","updateObjectives",t.value).pipe((0,u.R)(this.getGoalSubscription)).subscribe(o=>{o.success?(this.addObjectiveGoalDialogCard=!1,this.getAllObjectivesWithObjectives(),this.getObjectivesReload(this.subObjectiveGoalID),this.addObjectiveGoalDialogCard=!1,this.messageService.add({severity:"success  ",summary:"Done",detail:o.message})):this.messageService.add({severity:"error  ",summary:"Error",detail:o.message})})}deleteGoalDialog(t,o){this.confirmationService.confirm({key:"deleteGoal",target:t.target||new EventTarget,message:"Stop! Deleting this goal will delete all objectives under it?",icon:"pi pi-exclamation-triangle",accept:()=>{this.goal.getRoute("put","goals","deleteGoals",{_id:o}).pipe((0,u.R)(this.getGoalSubscription)).subscribe(i=>{i.success?(this.getAllObjectivesWithObjectives(),this.messageService.add({severity:"success  ",summary:"Done",detail:i.message}),this.updateGoalDialogCard=!1,this.updateGoalform.reset()):this.messageService.add({severity:"error  ",summary:"Error",detail:i.message})})}})}deleteSubGoal(t,o){this.confirmationService.confirm({key:"deleteSubGoal",target:event.target||new EventTarget,message:"Deleting Objectives Will Delete All Files. Continue?",icon:"pi pi-exclamation-triangle",accept:()=>{this.loading=!0,this.goal.getRoute("put","objectives","setInactiveObjectives",{id:t}).pipe((0,u.R)(this.getGoalSubscription)).subscribe(i=>{i.success?(this.getObjectives(o),this.loading=!1,this.messageService.add({severity:"success  ",summary:"Done",detail:i.message})):this.messageService.add({severity:"error  ",summary:"Error",detail:i.message})})}})}deleteSubGoalFile(t,o){this.confirmationService.confirm({key:"deleteSubGoalFile",target:event.target||new EventTarget,message:"Delete File",icon:"pi pi-exclamation-triangle",accept:()=>{this.fileService.deleteFileObjective({id:t,source:o}).pipe((0,u.R)(this.getGoalSubscription)).subscribe(i=>{i.success?(this.getAllFilesFromObjectiveLoad(this.USERID,this.objectiveIDforFile),this.messageService.add({severity:"success  ",summary:"Done",detail:i.message})):this.messageService.add({severity:"error  ",summary:"Error",detail:i.message})})}})}viewFiles(t){this.blockedPanel=t.complete,this.viewObjectiveFileDialogCard=!0,this.objectiveIDforFile=t.id,this.getAllFilesFromObjectiveLoad(this.USERID,t.id)}viewFilesHistory(t){this.viewObjectiveFileHistoryDialogCard=!0,this.getAllFilesHistoryFromObjectiveLoad(this.USERID,t.id)}onUpload(t){for(const o of t.files)this.uploadedFiles.push(o);this.validateFileType(this.uploadedFiles)||(this.messageService.add({severity:"error",summary:"File Unsupported",detail:"Unsupported file type! Please select only images, documents, or spreadsheets"}),t.preventDefault()),this.fileService.addMultipleFiles(this.USERID,this.objectiveIDforFile,this.uploadedFiles).pipe((0,u.R)(this.getGoalSubscription)).subscribe(o=>{this.AllObjectivesFiles=[],this.getAllFilesFromObjectiveLoad(this.USERID,this.objectiveIDforFile),o.success?(this.messageService.add({severity:"success  ",summary:"View the files",detail:"Files added successfully"}),this.addObjectiveFileDialogCard=!1,this.addFileForm.reset(),this.uploadedFiles=[],this.viewObjectiveFileDialogCard=!1):this.messageService.add({severity:"error  ",summary:"Error",detail:o.message})})}clearAddObjectiveGoalDialogCardDatas(){this.addObjectiveGoalDialogCard=!1,this.updateObjectiveGoalFlag=!1,this.tobeUpdatedSubGoal=null,this.addObjectiveGoalform.reset()}hidviewObjectRefetch(t){this.obj.getRoute("get","objectives",`getAllByIdObjectives/${t}`).pipe((0,u.R)(this.getGoalSubscription)).subscribe(o=>{this.objectiveDatas=o.Objectives,this.hideviewObjectiveFileDialogCardID=null,this.loading=!1})}hideViewObjectiveTable(t){this.subGoalObjective=!1,this.subObjectiveGoalID=null,this.objectiveDatas=[],t&&this.hidviewObjectRefetch(t)}hideViewFileDialogCard(){this.objectiveIDforFile=null,this.viewObjectiveFileDialogCard=!1}hideViewFileHistoryDialogCard(){this.viewObjectiveFileHistoryDialogCard=!1}getIcon(t){switch(t.split(".").pop()){case"jpg":case"jpeg":case"png":case"gif":case"svg":case"psd":case"dxf":return"pi pi-image";case"doc":case"docx":case"rtf":return"pi pi-file-word";case"pdf":return"pi pi-file-pdf";case"xls":case"xlsx":return"pi pi-file-excel";case"csv":return"pi pi-file-csv";case"ppt":case"pptx":return"pi pi-file-powerpoint";case"txt":return"pi pi-ticket";case"zip":return"pi pi-file-zip";case"mp3":case"wav":case"aac":return"pi pi-volume-up";default:return"pi pi-file"}}validateFileType(t){const o=["image/jpeg","image/png","image/svg+xml","image/gif","image/x-jif","image/x-jiff","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/csv","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain","application/zip","image/x-photoshop","image/vnd.dxf","audio/mpeg","audio/wav","audio/aac"];for(const i of t)if(!o.includes(i.type))return console.log(`Invalid file type: ${i.type}`),!1;return!0}customTitleCase(t){return t.split(/\s+/).map(l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase()).join(" ")}clear(t){t.clear(),this.filter.nativeElement.value=""}closeSubGoalTable(){this.subGoalObjective=!1,this.objectiveDatas=[]}onGlobalFilter(t,o){t.filterGlobal(o.target.value,"contains")}printTableNeeds(t){this.printingHead=!0,this.printingOfficeName=t}printTable(t="",o,i){let n,d,l=this.auth.domain+"/assets/layout/images/logo.png";this.isPrintableVisible=!0,n=document.getElementById("print").innerHTML,d=window.open("","_blank","top=0,left=0,height=100%,width=auto"),d.document.open(),d.document.write(`\n            <html lang="en">\n            <head>\n              <meta charset="UTF-8" />\n              <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n              <title>Document</title>\n            </head>\n            <style>\n            * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n            font-family: Arial, Helvetica, sans-serif;\n            font-size: 12px;\n          }\n\n          body {\n            width: 11in;\n            height: 8.5in;\n          }\n\n          @media print {\n            body {\n              padding: unset;\n              width: unset;\n              height: unset;\n              -webkit-print-color-adjust: exact; /* Enable background graphics */\n              print-color-adjust: exact; /* Enable background graphics */\n            }\n            @page {\n              size: landscape; /* Set layout to landscape */\n            }\n            margin: 1.5in 0in 0in 0in;\n          }\n\n          table {\n            border-collapse: collapse;\n            width: 100%;\n          }\n\n          table:not(:is(.nested-table)) {\n            border-top: 1px solid;\n            border-left: 1px solid;\n            table-layout: fixed;\n          }\n\n          table :is(th, td) {\n            padding: 4px 6px;\n            border-right: 1px solid;\n            border-bottom: 1px solid;\n          }\n\n          .nested-table {\n            tr {\n              td {\n                font-weight: 600;\n                &[rowspan="4"] {\n                  border-bottom: 0;\n                }\n                &:last-child {\n                  border-right: 0;\n                }\n              }\n              &:last-child {\n                td {\n                  &:last-child {\n                    border-bottom: 0;\n                  }\n                }\n              }\n            }\n          }\n\n          .logo {\n            border-right: 0;\n            img {\n              width: 80px;\n              height: 80px;\n              margin-left: auto;\n              display: block;\n            }\n            & + td {\n              & > div {\n                display: flex;\n                flex-direction: column;\n                justify-content: center;\n                align-items: center;\n                > h1 {\n                  font-size: 26px;\n                }\n                > h5 {\n                  color: #064f7c;\n                }\n                > hr {\n                  margin-top: 8px;\n                  width: 80%;\n                  border: 1px solid;\n                }\n              }\n            }\n          }\n\n          tr.font-condensed {\n            & > th {\n              font-size: 18px;\n              padding: 8px 6px;\n              &:first-child {\n                background-color: #f57e3a;\n              }\n              &:nth-child(2) {\n                background-color: #057a40;\n              }\n              &:last-child {\n                background-color: #efdf10;\n              }\n            }\n            & + tr {\n              & > th {\n                padding: 8px;\n              }\n              & + tr {\n                & > th {\n                  padding: 0px 4px;\n                  font-stretch: condensed;\n                  font-size: 16px;\n                }\n                & + tr {\n                  & > th {\n                    padding: 2px;\n                  }\n                }\n              }\n            }\n          }\n\n          tbody.data-cells {\n            font-stretch: condensed;\n            & tr {\n              & > td {\n                height: 0;\n                & > div {\n                  height: 100%;\n                  display: flex;\n                  flex-direction: column;\n                  gap: 1rem;\n                  justify-content: space-evenly;\n                  text-align: center;\n                  & p {\n                    font-size: 14px;\n                  }\n                }\n              }\n            }\n          }\n\n          tfoot {\n            font-stretch: condensed;\n            & tr td {\n              padding: 0;\n              & > div {\n                display: grid;\n                grid-template-columns: repeat(3, 1fr);\n                & > div {\n                  &:not(:last-child) {\n                    border-right: 1px solid;\n                  }\n                  & > div {\n                    font-size: 14px;\n                    padding: 3px 6px;\n                    &:not(:last-child) {\n                      border-bottom: 1px solid;\n                    }\n                    &:nth-child(2) {\n                      text-align: center;\n                      font-size: 16px;\n                      padding-top: 32px;\n                      font-weight: 600;\n                      padding-bottom: 0px;\n                    }\n                    &:last-child {\n                      text-align: center;\n                      font-size: 14px;\n                    }\n                  }\n                }\n              }\n            }\n          }\n\n          .border-0 {\n            /* border: 0px; */\n          }\n\n          .p-0 {\n            padding: 0px;\n          }\n\n          .text-align-end {\n            text-align: end;\n          }\n\n          .border-x-0 {\n            border-left: 1px solid white;\n            border-right: 1px solid white;\n          }\n\n          .font-condensed {\n            font-stretch: condensed;\n          }\n\n            </style>\n            <body>\n              <div id="tobeprinted">\n                <table>\n                  <thead>\n                    <tr>\n                      <th class="p-0" rowspan="4" colspan="10">\n                        <table class="nested-table">\n                          <tr>\n                            <td rowspan="4" class="logo">\n                              <img src="${l}" alt="CHMSU Logo" />\n                            </td>\n                            <td rowspan="4">\n                              <div>\n                                <h1>Carlos Hilado Memorial State University</h1>\n                                <h5>Alijis Campus . Binalbagan Campus . Fortune Towne Campus . Talisay Campus</h5>\n                                <hr />\n                              </div>\n                            </td>\n                            <td>Revision No.</td>\n                          </tr>\n                          <tr>\n                            <td>Date of Revision</td>\n                          </tr>\n                          <tr>\n                            <td>Date of Effectivity</td>\n                          </tr>\n                          <tr>\n                            <td>Page No.</td>\n                          </tr>\n                        </table>\n                      </th>\n                      <th>&nbsp;</th>\n                    </tr>\n                    <tr>\n                      <th>&nbsp;</th>\n                    </tr>\n                    <tr>\n                      <th>&nbsp;</th>\n                    </tr>\n                    <tr>\n                      <th class="text-align-end">Page 2</th>\n                    </tr>\n                    <tr class="font-condensed">\n                    <th colspan="5">${t.toUpperCase()||this.printingOfficeName.toUpperCase()}</th>\n                      <th colspan="5">QUALITY OBJECTIVES AND ACTION PLAN</th>\n                      <th class="text-align-end">CY</th>\n                    </tr>\n                    <tr>\n                      <th class="border-x-0" colspan="11"></th>\n                    </tr>\n                    <tr>\n                      <th class="border-x-0" colspan="11"></th>\n                    </tr>\n                  </thead>\n                  <body onload="window.print();window.close()">${n}</body>\n                  <tfoot>\n                    <tr>\n                      <td colspan="11">\n                        <div>\n                          <div>\n                            <div>Prepared by:</div>\n                            <div>${this.nameValue.toLocaleUpperCase()}</div>\n                            <div>${this.officeValue.toLocaleUpperCase()}</div>\n                          </div>\n                          <div>\n                            <div>Reviewed and verified by:</div>\n                            <div>YRIKA MARIE R. DUSARAN, PhDTM</div>\n                            <div>Director for Quality Management</div>\n                          </div>\n                          <div>\n                            <div>Approved by:</div>\n                            <div>ROSALINDA S. TUVILLA</div>\n                            <div>Vice President for Administrator and Finance</div>\n                          </div>\n                        </div>\n                      </td>\n                    </tr>\n                  </tfoot>\n                </table>\n              </div>\n            </body>\n          </html>\n              `),d.document.close(),this.isPrintableVisible=!1,this.printingOfficeName="",this.nameValue="",this.officeValue=""}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(h.ez),e.Y36(r.qu),e.Y36(h.YP),e.Y36(C.O),e.Y36(v.e),e.Y36(x.v),e.Y36(le.n),e.Y36(P.I),e.Y36(A.p),e.Y36(ne.j),e.Y36(e.sBO),e.Y36(se.F))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-goals"]],viewQuery:function(o,i){if(1&o&&e.Gf(ue,5),2&o){let l;e.iGM(l=e.CRH())&&(i.filter=l.first)}},decls:198,vars:140,consts:[[3,"autoZIndex"],[1,"grid"],[1,"col-12"],[1,"card"],[1,"add-user-heading"],[1,"text-xl","font-medium","mt-2","text-slate-950"],["pButton","","icon","pi pi-compass","label","Add Goal",3,"click"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","Add Goal",3,"visible","visibleChange"],[1,"p-fluid"],[1,"field","col-10","md:col-10"],[3,"formGroup"],[1,"field"],["htmlFor","name1"],["pInputText","","id","goals","autocomplete","off","formControlName","goals","required","",1,"flex-auto",3,"ngClass"],["mode","decimal","formControlName","budget",3,"showButtons","min"],[1,"flex","justify-space-between","gap-2"],["label","Cancel","severity","secondary",3,"click"],["label","Save",3,"click"],["header","Update Goal",3,"visible","visibleChange"],["responsiveLayout","stack",3,"modal","visible","breakpoints","maximizable","visibleChange","onHide"],[1,"col-12","md:col-6","p-6","text-center","md:text-left","flex","align-items-center","surface-section","text-800"],[1,"block","text-6xl","font-bold","mb-1"],[1,"text-6xl","text-primary","font-bold","mb-3"],[1,"mt-0","mb-4","text-700","line-height-3"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields","tableStyle"],["dt2",""],["styleClass","addObjective","position","top",3,"header","visible","modal","breakpoints","visibleChange","onHide"],["pInputText","","id","functional_objective","autocomplete","off","formControlName","functional_objective","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","performance_indicator","autocomplete","off","formControlName","performance_indicator","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","target","autocomplete","off","formControlName","target","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","formula","autocomplete","off","formControlName","formula","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","programs","autocomplete","off","formControlName","programs","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","responsible_persons","autocomplete","off","formControlName","responsible_persons","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","clients","autocomplete","off","formControlName","clients","required","",1,"flex-auto",3,"ngClass"],["formControlName","timetable","selectionMode","range",3,"readonlyInput"],["htmlFor","department"],["formControlName","selectedDropdown","optionLabel","name","placeholder","Select a Frequency",3,"options"],["pInputText","","id","data_source","autocomplete","off","formControlName","data_source","required","",1,"flex-auto",3,"ngClass"],["mode","decimal","formControlName","budget",3,"min","showButtons"],[3,"label","click"],["responsiveLayout","stack","position","top",3,"header","modal","visible","breakpoints","maximizable","closable","visibleChange"],["dt3",""],["pTemplate","footer"],["styleClass","addObjective","header","Drag and Drop Files","position","top",3,"visible","modal","breakpoints","visibleChange"],["name","files","customUpload","true","multiple","true","maxFileSize","20000000","formControlName","files","ngDefaultControl","",3,"files","uploadHandler"],["header","Office Head",3,"modal","visible","visibleChange"],[1,"p-text-secondary","block","mb-5"],[1,"flex","align-items-center","gap-3","mb-3"],["for","username",1,"font-semibold","w-6rem"],["pInputText","","id","name","placeholder","e.g Benrie Nufable, PHD. TM","autocomplete","off",1,"flex-auto",3,"ngModel","ngModelChange"],["nameInput",""],[1,"flex","align-items-center","gap-3","mb-5"],["for","email",1,"font-semibold","w-6rem"],["pInputText","","id","office","placeholder","e.g MIS Head - DPO","autocomplete","off",1,"flex-auto",3,"ngModel","ngModelChange"],["officeInput",""],[1,"flex","justify-content-end","gap-2"],["label","Cancel","severity","secondary",3,"onClick"],["label","Save",3,"onClick"],["id","print",3,"ngClass"],[4,"ngIf"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search Keyword",1,"p-inputtext","p-component","p-element","w-full",3,"input"],["filter",""],[2,"min-width","12rem"],[1,"flex","justify-content-between","align-items-center"],["type","text","field","goals","display","menu","placeholder","Search by Goals"],["type","text","field","budget","display","menu","placeholder","Search by Budget"],["type","text","field","department","display","menu","placeholder","Search by Department"],["type","text","field","campus","display","menu","placeholder","Search by Campus"],["type","text","field","createdBy","display","menu","placeholder","Search by Created By"],["type","text","field","createdAt","display","menu","placeholder","eg. 2024-06-28"],["pButton","","pRipple","","type","button","pTooltip","Show/Add objectives","tooltipPosition","top",1,"p-button-help","p-button-text",3,"click"],["label","View Budget","icon","pi pi-wallet ","styleClass","m-1 cursor-pointer bg-teal-200 ",3,"click"],["op",""],[3,"header","subheader"],["class","mb-1",4,"ngFor","ngForOf"],[1,"col"],[3,"color","value","showValue"],[1,"options-users"],[1,"pi","pi-file-edit","text-xl",2,"color","#0ea5e9","cursor","pointer",3,"click"],[1,"pi","pi-trash","text-xl",2,"color","#ef4444","cursor","pointer",3,"click"],["key","deleteGoal"],[1,"mb-1"],[1,"pi","pi-money-bill","bg-green-400"],[3,"severity","value"],[1,"pi","pi-wrench"],["colspan","8"],["icon","pi pi-plus","severity","success","pTooltip","Add Objectives","tooltipPosition","top",3,"outlined","click"],["icon","pi pi-file-pdf","severity","info","pTooltip","Print PDF","tooltipPosition","top",3,"outlined","click"],["type","text","field","functional_objective","display","menu","placeholder","Search by Functional Objective"],["type","text","field","performance_indicator","display","menu","placeholder","Search by Performance Indicator"],["type","text","field","target","display","menu","placeholder","Search by Target"],["type","text","field","formula","display","menu","placeholder","Search by Formula"],["type","text","field","programs","display","menu","placeholder","Search by Programs"],["type","text","field","responsible_persons","display","menu","placeholder","Search by Responsible Persons"],["type","text","field","clients","display","menu","placeholder","Search by Clients"],["type","text","field","timetable","display","menu","placeholder","Search by Timetable"],[2,"min-width","4rem"],["type","text","field","frequency_monitoring","display","menu","placeholder","Search by Frequency Monitoring"],["type","text","field","data_source","display","menu","placeholder","Search by Data Source"],["type","text","field","complete","display","menu","placeholder","Search by Completion"],[2,"min-width","6rem"],["type","text","field","createdAt","display","menu","placeholder","Search by Files"],[2,"min-width","9rem"],[3,"text","raised","severity","icon","label","disabled","pTooltip","tooltipPosition","loading","loadingChange","click"],["key","updateObjectiveComplete"],["confirmPopupRef",""],[1,"flex","flex-row","align-items-center"],["pTooltip","File List","tooltipPosition","top",1,"pi","pi-folder","text-2xl","hover:text-4xl","text-yellow-400","transition","ease-in-out","duration-200","hover:pi-folder-open","cursor-pointer",3,"click"],["pTooltip","File History","tooltipPosition","top","class","pi pi-cog text-2xl hover:text-4xl text-yellow-400 transition ease-in-out duration-200 hover:pi-cog cursor-pointer"],["key","deleteSubGoal"],["pTooltip","File History","tooltipPosition","top",1,"pi","pi-cog","text-2xl","hover:text-4xl","text-yellow-400","transition","ease-in-out","duration-200","hover:pi-cog","cursor-pointer",3,"click"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"disabled","click"],["icon","pi pi-upload","severity","success","pTooltip","Add Objectives","tooltipPosition","top",3,"disabled","outlined","click"],["pInputText","","type","text","placeholder","Search Keyword",1,"p-inputtext","p-component","p-element","w-full",3,"disabled","input"],["target","_blank",3,"href"],[1,"text-4xl",3,"ngClass"],["class","pi pi-trash text-xl","style","color: #868585"],["key","deleteSubGoalFile"],[1,"pi","pi-trash","text-xl",2,"color","#868585"],["label","Cancel","severity","secondary",3,"text","click"],[4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(e._UZ(0,"p-toast",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),e._uU(6,"Goals"),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return i.addGoal()}),e.qZA()(),e.TgZ(8,"p-table",7,8),e.YNc(10,ge,6,0,"ng-template",9)(11,me,31,0,"ng-template",10)(12,fe,35,30,"ng-template",11)(13,ve,3,0,"ng-template",12)(14,Ze,3,0,"ng-template",13),e.qZA()()()(),e.TgZ(15,"p-dialog",14),e.NdJ("visibleChange",function(n){return i.addGoalDialogCard=n}),e.TgZ(16,"div",15)(17,"div",16)(18,"form",17)(19,"div",18)(20,"label",19),e._uU(21,"Goal name"),e.qZA(),e._UZ(22,"input",20),e.qZA(),e.TgZ(23,"div",18)(24,"label",19),e._uU(25,"Budget"),e.qZA(),e._UZ(26,"p-inputNumber",21),e.qZA()()()(),e.TgZ(27,"div",22)(28,"p-button",23),e.NdJ("click",function(){return i.addGoalDialogCard=!1}),e.qZA(),e.TgZ(29,"p-button",24),e.NdJ("click",function(){return i.addGoalDialogExec(i.addGoalform)}),e.qZA()()(),e.TgZ(30,"p-dialog",25),e.NdJ("visibleChange",function(n){return i.updateGoalDialogCard=n}),e.TgZ(31,"div",15)(32,"div",16)(33,"form",17)(34,"div",18)(35,"label",19),e._uU(36,"Goal name"),e.qZA(),e._UZ(37,"input",20),e.qZA(),e.TgZ(38,"div",18)(39,"label",19),e._uU(40,"Budget"),e.qZA(),e._UZ(41,"p-inputNumber",21),e.qZA()()()(),e.TgZ(42,"div",22)(43,"p-button",23),e.NdJ("click",function(){return i.updateGoalDialogCard=!1}),e.qZA(),e.TgZ(44,"p-button",24),e.NdJ("click",function(){return i.updateGoalDialogExec(i.updateGoalform)}),e.qZA()()(),e.TgZ(45,"p-dialog",26),e.NdJ("visibleChange",function(n){return i.subGoalObjective=n})("onHide",function(){return i.hideViewObjectiveTable()}),e.TgZ(46,"div",1)(47,"div",27)(48,"section")(49,"span",28),e._uU(50),e.ALo(51,"titlecase"),e.qZA(),e.TgZ(52,"div",29),e._uU(53),e.ALo(54,"titlecase"),e.qZA(),e.TgZ(55,"p",30),e._uU(56),e.ALo(57,"titlecase"),e.qZA()()(),e.TgZ(58,"div",27)(59,"section")(60,"span",28),e._uU(61),e.ALo(62,"titlecase"),e.qZA(),e.TgZ(63,"div",29),e._uU(64),e.ALo(65,"peso"),e.qZA(),e.TgZ(66,"p",30),e._uU(67),e.ALo(68,"peso"),e.qZA()()(),e.TgZ(69,"div",2)(70,"p-table",31,32),e.YNc(72,Ce,8,2,"ng-template",9)(73,xe,60,0,"ng-template",10)(74,ye,51,52,"ng-template",11)(75,Ae,3,0,"ng-template",12)(76,Te,3,0,"ng-template",13),e.qZA()()()(),e.TgZ(77,"p-dialog",33),e.NdJ("visibleChange",function(n){return i.addObjectiveGoalDialogCard=n})("onHide",function(){return i.clearAddObjectiveGoalDialogCardDatas()}),e.TgZ(78,"div",15)(79,"div",16)(80,"form",17)(81,"div",18)(82,"label",19),e._uU(83,"Functional Objective"),e.qZA(),e._UZ(84,"input",34),e.qZA(),e.TgZ(85,"div",18)(86,"label",19),e._uU(87,"Performance Indicator"),e.qZA(),e._UZ(88,"input",35),e.qZA(),e.TgZ(89,"div",18)(90,"label",19),e._uU(91,"Target"),e.qZA(),e._UZ(92,"input",36),e.qZA(),e.TgZ(93,"div",18)(94,"label",19),e._uU(95,"Formula"),e.qZA(),e._UZ(96,"input",37),e.qZA(),e.TgZ(97,"div",18)(98,"label",19),e._uU(99,"Programs"),e.qZA(),e._UZ(100,"input",38),e.qZA(),e.TgZ(101,"div",18)(102,"label",19),e._uU(103,"Responsible Persons"),e.qZA(),e._UZ(104,"input",39),e.qZA(),e.TgZ(105,"div",18)(106,"label",19),e._uU(107,"Clients"),e.qZA(),e._UZ(108,"input",40),e.qZA(),e.TgZ(109,"div",18)(110,"label",19),e._uU(111,"Timetable"),e.qZA(),e._UZ(112,"p-calendar",41),e.qZA(),e.TgZ(113,"div",18)(114,"label",42),e._uU(115,"Frequency Monitoring"),e.qZA(),e.TgZ(116,"form",17),e._UZ(117,"p-dropdown",43),e.qZA()(),e.TgZ(118,"div",18)(119,"label",19),e._uU(120,"Means of Verification(Data Source)"),e.qZA(),e._UZ(121,"input",44),e.qZA(),e.TgZ(122,"div",18)(123,"label",19),e._uU(124," budget "),e.qZA(),e._UZ(125,"p-inputNumber",45),e.qZA()()()(),e.TgZ(126,"div",22)(127,"p-button",23),e.NdJ("click",function(){return i.clearAddObjectiveGoalDialogCardDatas()}),e.qZA(),e.TgZ(128,"p-button",46),e.NdJ("click",function(){return i.updateObjectiveGoalFlag?i.updateSubObjectiveGoalDialogExec(i.addObjectiveGoalform):i.addSubObjectiveGoalDialogExec(i.addObjectiveGoalform)}),e.qZA()()(),e.TgZ(129,"p-dialog",47),e.NdJ("visibleChange",function(n){return i.viewObjectiveFileDialogCard=n}),e.TgZ(130,"div",1)(131,"div",2)(132,"p-table",31,48),e.YNc(134,Oe,7,4,"ng-template",9)(135,Ge,10,0,"ng-template",10)(136,De,12,7,"ng-template",11)(137,we,3,0,"ng-template",12)(138,Fe,3,0,"ng-template",13),e.qZA()()(),e.YNc(139,ke,1,1,"ng-template",49),e.qZA(),e.TgZ(140,"p-dialog",50),e.NdJ("visibleChange",function(n){return i.addObjectiveFileDialogCard=n}),e.TgZ(141,"div",15)(142,"form",17)(143,"p-fileUpload",51),e.NdJ("uploadHandler",function(n){return i.onUpload(n)}),e.qZA()()(),e._uU(144," \xa0\xa0\n"),e.qZA(),e.TgZ(145,"p-dialog",47),e.NdJ("visibleChange",function(n){return i.viewObjectiveFileHistoryDialogCard=n}),e.TgZ(146,"div",1)(147,"div",2)(148,"p-table",31,48),e.YNc(150,Se,6,0,"ng-template",9)(151,Me,13,0,"ng-template",10)(152,Pe,14,15,"ng-template",11)(153,Ie,3,0,"ng-template",12)(154,Je,3,0,"ng-template",13),e.qZA()()(),e.YNc(155,Ne,1,1,"ng-template",49),e.qZA(),e.TgZ(156,"p-dialog",52),e.NdJ("visibleChange",function(n){return i.printingHead=n}),e.TgZ(157,"span",53),e._uU(158,"Update your information."),e.qZA(),e.TgZ(159,"div",54)(160,"label",55),e._uU(161,"Name"),e.qZA(),e.TgZ(162,"input",56,57),e.NdJ("ngModelChange",function(n){return i.nameValue=n}),e.qZA()(),e.TgZ(164,"div",58)(165,"label",59),e._uU(166,"Office"),e.qZA(),e.TgZ(167,"input",60,61),e.NdJ("ngModelChange",function(n){return i.officeValue=n}),e.qZA()(),e.TgZ(169,"div",62)(170,"p-button",63),e.NdJ("onClick",function(){return i.printingHead=!1}),e.qZA(),e.TgZ(171,"p-button",64),e.NdJ("onClick",function(){return i.printTable(),i.printingHead=!1}),e.qZA()()(),e.TgZ(172,"table",65)(173,"thead")(174,"tr")(175,"th"),e._uU(176,"Functional Objectives"),e.qZA(),e.TgZ(177,"th"),e._uU(178,"Performance Indicators"),e.qZA(),e.TgZ(179,"th"),e._uU(180,"Target"),e.qZA(),e.TgZ(181,"th"),e._uU(182,"Formula"),e.qZA(),e.TgZ(183,"th"),e._uU(184,"Programs, Projects or Activities"),e.qZA(),e.TgZ(185,"th"),e._uU(186,"Responsible Persons & Partners"),e.qZA(),e.TgZ(187,"th"),e._uU(188,"Target Participants or Clients"),e.qZA(),e.TgZ(189,"th"),e._uU(190,"Timetable"),e.qZA(),e.TgZ(191,"th"),e._uU(192,"Frequency of Monitoring"),e.qZA(),e.TgZ(193,"th"),e._uU(194,"Means of Verification (Data Source)"),e.qZA(),e.TgZ(195,"th"),e._uU(196,"Budget"),e.qZA()()(),e.YNc(197,He,2,1,"tbody",66),e.qZA()),2&o&&(e.Q6J("autoZIndex",!0),e.xp6(8),e.Q6J("value",i.goals)("rows",10)("loading",i.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(118,Le)),e.xp6(7),e.Akn(e.DdM(119,G)),e.Q6J("visible",i.addGoalDialogCard),e.xp6(3),e.Q6J("formGroup",i.addGoalform),e.xp6(4),e.Q6J("ngClass",null!=i.addGoalform&&i.addGoalform.get("goals").touched&&null!=i.addGoalform&&null!=i.addGoalform.controls.goals.errors&&i.addGoalform.controls.goals.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("showButtons",!0)("min",0),e.xp6(4),e.Akn(e.DdM(120,G)),e.Q6J("visible",i.updateGoalDialogCard),e.xp6(3),e.Q6J("formGroup",i.updateGoalform),e.xp6(4),e.Q6J("ngClass",null!=i.updateGoalform&&i.updateGoalform.get("goals").touched&&null!=i.updateGoalform&&null!=i.updateGoalform.controls.goals.errors&&i.updateGoalform.controls.goals.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("showButtons",!0)("min",0),e.xp6(4),e.Akn(e.DdM(121,U)),e.Q6J("modal",!0)("visible",i.subGoalObjective)("breakpoints",e.DdM(122,y))("maximizable",!0),e.xp6(5),e.hij(" ",e.lcZ(51,106,null==i.subOnjectiveHeaderData||null==i.subOnjectiveHeaderData.users?null:i.subOnjectiveHeaderData.users.username)," "),e.xp6(3),e.hij(" ",e.lcZ(54,108,(null==i.subOnjectiveHeaderData?null:i.subOnjectiveHeaderData.campus)||"Campus")," "),e.xp6(3),e.hij(" ",e.lcZ(57,110,(null==i.subOnjectiveHeaderData?null:i.subOnjectiveHeaderData.department)||"Department")," "),e.xp6(5),e.hij(" ",e.lcZ(62,112,i.subObjectiveHeaders)," "),e.xp6(3),e.hij(" ",e.lcZ(65,114,i.goalBudget||0)," "),e.xp6(3),e.hij(" Remaining: ",e.lcZ(68,116,i.goalDataRemainingBudget||"0")," "),e.xp6(3),e.Q6J("value",i.objectiveDatas)("rows",10)("loading",i.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(123,Be))("tableStyle",e.DdM(124,q)),e.xp6(7),e.Akn(e.DdM(125,V)),e.Q6J("header",i.updateObjectiveGoalFlag?"Update":"Add Objectives")("visible",i.addObjectiveGoalDialogCard)("modal",!0)("breakpoints",e.DdM(126,y)),e.xp6(3),e.Q6J("formGroup",i.addObjectiveGoalform),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("functional_objective").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.functional_objective.errors&&i.addObjectiveGoalform.controls.functional_objective.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("performance_indicator").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.performance_indicator.errors&&i.addObjectiveGoalform.controls.performance_indicator.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("target").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.target.errors&&i.addObjectiveGoalform.controls.target.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("formula").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.formula.errors&&i.addObjectiveGoalform.controls.formula.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("programs").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.programs.errors&&i.addObjectiveGoalform.controls.programs.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("responsible_persons").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.responsible_persons.errors&&i.addObjectiveGoalform.controls.responsible_persons.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("clients").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.clients.errors&&i.addObjectiveGoalform.controls.clients.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("readonlyInput",!0),e.xp6(4),e.Q6J("formGroup",i.formGroupDropdown),e.xp6(1),e.Q6J("options",i.dropdwonSelection),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("data_source").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.data_source.errors&&i.addObjectiveGoalform.controls.data_source.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("min",0)("showButtons",!0),e.xp6(3),e.Q6J("label",i.updateObjectiveGoalFlag?"Update":"Save"),e.xp6(1),e.Akn(e.DdM(127,U)),e.Q6J("header",i.blockedPanel?"Files Locked: Objective Marked Complete":"File List")("modal",!0)("visible",i.viewObjectiveFileDialogCard)("breakpoints",e.DdM(128,y))("maximizable",!0)("closable",!1),e.xp6(3),e.Q6J("value",i.AllObjectivesFiles)("rows",5)("loading",i.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(129,Y))("tableStyle",e.DdM(130,q)),e.xp6(8),e.Akn(e.DdM(131,V)),e.Q6J("visible",i.addObjectiveFileDialogCard)("modal",!0)("breakpoints",e.DdM(132,y)),e.xp6(2),e.Q6J("formGroup",i.addFileForm),e.xp6(1),e.Q6J("files",i.uploadedFiles),e.xp6(2),e.Akn(e.DdM(133,U)),e.Q6J("header","File HistoryList")("modal",!0)("visible",i.viewObjectiveFileHistoryDialogCard)("breakpoints",e.DdM(134,y))("maximizable",!0)("closable",!1),e.xp6(3),e.Q6J("value",i.AllObjectivesHistoryFiles)("rows",5)("loading",i.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(135,Y))("tableStyle",e.DdM(136,q)),e.xp6(8),e.Akn(e.DdM(137,G)),e.Q6J("modal",!0)("visible",i.printingHead),e.xp6(6),e.Q6J("ngModel",i.nameValue),e.xp6(5),e.Q6J("ngModel",i.officeValue),e.xp6(5),e.Q6J("ngClass",e.VKq(138,Ee,!i.isPrintableVisible)),e.xp6(25),e.Q6J("ngIf",0!=(null==i.objectiveDatas?null:i.objectiveDatas.length)))},dependencies:[g.mk,g.sg,g.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.On,r.sg,r.u,I.u,Z.iA,h.jx,Z.xl,j.Hq,j.zx,J.V,N.f,R.o,H.Lt,L.Rn,re.FN,B.P,A.p,E.k,de.A,ce.T,Q.Z,pe.V,g.rS,g.uU,T.vZ],styles:['@charset "UTF-8";.options-users[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center}.customer-badge.status-active[_ngcontent-%COMP%]{background:#c8e6c9;color:#256029}.customer-badge.status-inactive[_ngcontent-%COMP%]{background:#ffcdd2;color:#c63737}.customer-badge.status-pending[_ngcontent-%COMP%]{background:#ffd8b2;color:#805b36}  .p-dialog-content{overflow-y:visible!important}  .footer-button{display:flex;justify-content:space-evenly}.add-user-heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 0 1.5rem}  .footer-button{gap:8rem!important}  .addObjective{overflow-y:auto}  .pi-folder:hover{transform:scale(1.2)}  .hover\\:pi-folder-open:hover:before{content:"\\1f4c2"}  .hover\\:pi-cog:hover:before{content:"\\2699\\fe0f"}  .p-fileupload-row>div:first-child{display:none!important}  .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider{background:#41c5b7}  .p-overlaypanel .p-overlaypanel-content{padding:0!important}  p-panel{width:100%!important;z-index:9999999999}  .p-blockui{z-index:9999999999;top:0;left:0;width:100%;height:100%;background-color:transparent;transition-property:background-color;align-items:center;justify-content:center}  .p-blockui.p-component-overlay{position:absolute;display:flex}']})}return a})();var Ve=c(981);function Ye(a,s){if(1&a&&e._UZ(0,"p-chart",3),2&a){const t=e.oxw();e.Q6J("data",t.donutData)("options",t.donutOptions)}}function ze(a,s){1&a&&e._UZ(0,"p-skeleton",17)}function Ke(a,s){1&a&&e._UZ(0,"div")}function $e(a,s){1&a&&(e.TgZ(0,"tr"),e._UZ(1,"th",18),e.TgZ(2,"th"),e._uU(3,"Goal Name"),e.qZA(),e.TgZ(4,"th"),e._uU(5,"Budget"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Total Objectives"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Completed Objectives"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Incomplete Objectives"),e.qZA()())}function We(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"button",19),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.ALo(7,"currency"),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA()()),2&a){const t=s.$implicit,o=s.expanded,i=e.oxw();e.xp6(2),e.Q6J("pRowToggler",t)("icon",o?"pi pi-chevron-down":"pi pi-chevron-right"),e.xp6(2),e.Oqu(t.goals),e.xp6(2),e.Oqu(e.Dn7(7,7,t.budget,"PHP","symbol")),e.xp6(3),e.Oqu((null==t.objectivesDetails?null:t.objectivesDetails.length)||0),e.xp6(2),e.Oqu(i.getCompletedObjectives(t)),e.xp6(2),e.Oqu(i.getIncompleteObjectives(t))}}function Xe(a,s){1&a&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"Objective"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"Budget"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"Complete"),e.qZA()())}const et=(a,s)=>({"pi-check-circle text-green-500":a,"pi-times-circle text-red-500":s});function tt(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"currency"),e.qZA(),e.TgZ(6,"td"),e._UZ(7,"i",23),e.qZA()()),2&a){const t=s.$implicit;e.xp6(2),e.hij(" ",t.functional_objective," "),e.xp6(2),e.hij(" ",e.Dn7(5,3,t.budget,"PHP","symbol")," "),e.xp6(3),e.Q6J("ngClass",e.WLB(7,et,t.complete,!t.complete))}}function it(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td",20)(2,"div",21)(3,"p-table",22),e.YNc(4,Xe,7,0,"ng-template",14)(5,tt,8,10,"ng-template",15),e.qZA()()()()),2&a){const t=s.$implicit;e.xp6(3),e.Q6J("value",t.objectivesDetails)}}let ot=(()=>{class a{constructor(t,o,i,l,n){this.goal=t,this.goalService=o,this.obj=i,this.auth=l,this.productService=n,this.dashboardSubscription=new f.x,this.goals=[],this.products=[],this.loading=!0,this.isExpanded=!1,this.expandedRows={},this.USERID=this.auth.getTokenUserID()||localStorage.getItem("id"),this.getGoals(),this.getObjectiveViewPieChart(),this.getAllObjectives()}ngOnInit(){this.productService.getProductsWithOrdersSmall().then(t=>this.products=t),this.obj.getRoute("get","objectives",`getAllObjectivesForDashboard/${this.USERID}`).subscribe({next:t=>{this.totalObjectives=t.data[0].objectivesCount,this.completedObjectives=t.data[0].objectiveCompleted,this.completedObjectives=t.data[0].objectiveUncompleted},error:t=>{console.error("Error fetching objectives:",t)}}),this.getAllObjectivesForTable()}getCompletedObjectives(t){return t.objectivesDetails?.filter(o=>o.complete&&!o.deleted).length||0}getIncompleteObjectives(t){return t.objectivesDetails?.filter(o=>!o.complete&&!o.deleted).length||0}getGoals(){this.goal.getRoute("get","goals",`getGoalsForDashboard/${this.USERID}`).pipe((0,u.R)(this.dashboardSubscription)).subscribe(t=>{this.goalForTables=t?.data[0]?.totalBudget[0]?.totalAmount||0,this.goalCount=t?.data[0]?.goalCount,this.loading=!1})}getAllObjectives(){this.obj.getRoute("get","objectives",`getAllObjectivesBudget/${this.USERID}`).pipe((0,u.R)(this.dashboardSubscription)).subscribe(t=>{this.objectiveBudget=t.data})}getAllObjectivesForTable(){this.obj.getRoute("get","goals",`getAllObjectivesWithObjectives/${this.USERID}`).pipe((0,u.R)(this.dashboardSubscription)).subscribe(t=>{this.goals=t.goals})}getObjectiveViewPieChart(){this.goalService.getRoute("get","goals",`getObjectivesViewTable/${this.USERID}`).pipe((0,u.R)(this.dashboardSubscription)).subscribe(t=>{this.initBarCharts(t?.data)})}ngOnDestroy(){this.dashboardSubscription.unsubscribe()}initBarCharts(t){t?.map(p=>p.objectives);let i=t?.map(p=>p.objectives.filter(_=>0==_.deleted));const l=getComputedStyle(document.documentElement),n=l.getPropertyValue("--text-color"),d=l.getPropertyValue("--text-color-secondary"),m=l.getPropertyValue("--surface-border");this.donutData={labels:[...t?.map(p=>p.goals)],datasets:[{label:"Goals",backgroundColor:l.getPropertyValue("--primary-500"),borderColor:l.getPropertyValue("--primary-500"),data:[...t?.map(p=>1)]},{label:"Objectives",backgroundColor:l.getPropertyValue("--primary-200"),borderColor:l.getPropertyValue("--primary-200"),data:[...i.map(p=>p.length?p.length:0)]}]},this.donutOptions={plugins:{legend:{labels:{fontColor:n}}},scales:{x:{ticks:{color:d,font:{weight:500}},grid:{display:!1,drawBorder:!1}},y:{ticks:{color:d},grid:{color:m,drawBorder:!1}}}}}expandAll(){this.isExpanded?this.expandedRows={}:this.products.forEach(t=>t&&t.name?this.expandedRows[t.name]=!0:""),this.isExpanded=!this.isExpanded}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(C.O),e.Y36(C.O),e.Y36(x.v),e.Y36(v.e),e.Y36(Ve.M))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-dashboard"]],decls:40,vars:16,consts:[[1,"grid"],[1,"col-12","xl:col-6"],[1,"card"],["type","bar",3,"data","options"],["header","Goal Summary"],[1,"flex","flex-column","align-items-center"],[3,"value","showValue"],[1,"mt-3","text-center","text-6xl",2,"font-family","'Figtree', 'Roboto', 'Noto Sans Hebrew',\n                            'Noto Kufi Arabic', 'Noto Sans JP', sans-serif"],[1,"text-2xl","text-color-secondary"],[1,"mt-3","text-xl"],["header","Objective Summary Budget"],[4,"ngIf"],[1,"col-12"],["dataKey","id","responsiveLayout","scroll",3,"value","expandedRowKeys"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["width","18rem","height","18rem",1,"my-auto"],[2,"width","3rem"],["type","button","pButton","","pRipple","",1,"p-button-text","p-button-rounded","p-button-plain",3,"pRowToggler","icon"],["colspan","7"],[1,"p-3"],[3,"value"],[1,"pi",3,"ngClass"]],template:function(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1,"dashboard"),e.qZA(),e.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"h5"),e._uU(6,"Bar Chart"),e.qZA(),e.YNc(7,Ye,1,2,"p-chart",3)(8,ze,1,0),e.qZA()(),e.TgZ(9,"div",1)(10,"p-card",4)(11,"div",5),e._UZ(12,"p-progressBar",6),e.TgZ(13,"p",7),e._uU(14),e.ALo(15,"peso"),e.qZA(),e.TgZ(16,"p",8),e._uU(17,"Total Budget"),e.qZA(),e.TgZ(18,"p",9),e._uU(19),e.qZA(),e.TgZ(20,"p",9),e._uU(21),e.ALo(22,"peso"),e.qZA()()()(),e.TgZ(23,"div",1)(24,"p-card",10)(25,"div",5),e.YNc(26,Ke,1,0,"div",11),e.TgZ(27,"p",7),e._uU(28),e.ALo(29,"peso"),e.qZA(),e.TgZ(30,"p",8),e._uU(31,"Total Budget"),e.qZA()()()(),e.TgZ(32,"div",12)(33,"div",2)(34,"h5"),e._uU(35,"Goals & Objectives"),e.qZA(),e.TgZ(36,"p-table",13),e.YNc(37,$e,12,0,"ng-template",14)(38,We,14,11,"ng-template",15)(39,it,6,1,"ng-template",16),e.qZA()()()()),2&o&&(e.xp6(7),e.um2(7,i.donutData?7:8),e.xp6(5),e.Q6J("value",i.objectiveBudget/i.goalForTables*100)("showValue",!1),e.xp6(2),e.hij(" ",e.lcZ(15,10,i.goalForTables)," "),e.xp6(5),e.hij("",i.goalCount," Goals"),e.xp6(2),e.hij(" Remaining Budget: ",e.lcZ(22,12,i.goalForTables-i.objectiveBudget)," "),e.xp6(5),e.Q6J("ngIf",!i.loading),e.xp6(2),e.hij(" ",e.lcZ(29,14,i.objectiveBudget)," "),e.xp6(8),e.Q6J("value",i.goals)("expandedRowKeys",i.expandedRows))},dependencies:[g.mk,g.O5,k.C,Z.iA,h.jx,Z.jB,j.Hq,E.k,Q.Z,S.O,g.H9,T.vZ]})}return a})();var at=c(5118);const lt=["filter"];function nt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",38)(1,"button",39),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),l=e.MAs(7);return e.KtG(i.clear(l))}),e.qZA(),e.TgZ(2,"span",40),e._UZ(3,"i",41),e.TgZ(4,"input",42,43),e.NdJ("input",function(i){e.CHM(t);const l=e.oxw(),n=e.MAs(7);return e.KtG(l.onGlobalFilter(n,i))}),e.qZA()()()}}function st(a,s){1&a&&(e.TgZ(0,"tr")(1,"th",44)(2,"div",45),e._uU(3," Goal "),e._UZ(4,"p-columnFilter",46),e.qZA()(),e.TgZ(5,"th",44)(6,"div",45),e._uU(7," Goal Budget "),e._UZ(8,"p-columnFilter",47),e.qZA()(),e.TgZ(9,"th",44)(10,"div",45),e._uU(11," Functional Objective "),e._UZ(12,"p-columnFilter",48),e.qZA()(),e.TgZ(13,"th",44)(14,"div",45),e._uU(15," Performance Indicator "),e._UZ(16,"p-columnFilter",49),e.qZA()(),e.TgZ(17,"th",44)(18,"div",45),e._uU(19," Target "),e._UZ(20,"p-columnFilter",50),e.qZA()(),e.TgZ(21,"th",44)(22,"div",45),e._uU(23," Formula "),e._UZ(24,"p-columnFilter",51),e.qZA()(),e.TgZ(25,"th",44)(26,"div",45),e._uU(27," Programs "),e._UZ(28,"p-columnFilter",52),e.qZA()(),e.TgZ(29,"th",44)(30,"div",45),e._uU(31," Responsible Persons "),e._UZ(32,"p-columnFilter",53),e.qZA()(),e.TgZ(33,"th",44)(34,"div",45),e._uU(35," Clients "),e._UZ(36,"p-columnFilter",54),e.qZA()(),e.TgZ(37,"th",44)(38,"div",45),e._uU(39," Timetable "),e._UZ(40,"p-columnFilter",55),e.qZA()(),e.TgZ(41,"th",56)(42,"div",45),e._uU(43," Frequency Monitoring "),e._UZ(44,"p-columnFilter",57),e.qZA()(),e.TgZ(45,"th",44)(46,"div",45),e._uU(47," Data Source "),e._UZ(48,"p-columnFilter",58),e.qZA()(),e.TgZ(49,"th",44)(50,"div",45),e._uU(51," Budget "),e._UZ(52,"p-columnFilter",59),e.qZA()(),e.TgZ(53,"th",44)(54,"div",45),e._uU(55," Created At "),e._UZ(56,"p-columnFilter",60),e.qZA()(),e.TgZ(57,"th",44)(58,"div",45),e._uU(59," Submitted "),e._UZ(60,"p-columnFilter",61),e.qZA()(),e.TgZ(61,"th",62)(62,"div",45),e._uU(63," Files "),e._UZ(64,"p-columnFilter",63),e.qZA()(),e.TgZ(65,"th",64)(66,"div",45),e._uU(67," Options "),e.qZA()()())}function rt(a,s){if(1&a){const t=e.EpF();e._uU(0," \xa0 \xa0 "),e.TgZ(1,"i",75),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.viewFilesHistory(i))}),e.qZA()}}function dt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"titlecase"),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"peso"),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"titlecase"),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.ALo(12,"titlecase"),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.ALo(15,"titlecase"),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.ALo(18,"titlecase"),e.qZA(),e.TgZ(19,"td"),e._uU(20),e.ALo(21,"titlecase"),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.ALo(24,"titlecase"),e.qZA(),e.TgZ(25,"td"),e._uU(26),e.ALo(27,"titlecase"),e.qZA(),e.TgZ(28,"td"),e._uU(29),e.ALo(30,"date"),e.ALo(31,"date"),e.qZA(),e.TgZ(32,"td"),e._uU(33),e.ALo(34,"titlecase"),e.qZA(),e.TgZ(35,"td"),e._uU(36),e.ALo(37,"titlecase"),e.qZA(),e.TgZ(38,"td"),e._uU(39),e.ALo(40,"peso"),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.ALo(43,"date"),e.qZA(),e.TgZ(44,"td")(45,"p-button",65),e.NdJ("loadingChange",function(i){const n=e.CHM(t).rowIndex,d=e.oxw();return e.KtG(d.onclickCompletionButton[n]=i)})("click",function(i){const l=e.CHM(t),n=l.$implicit,d=l.rowIndex,m=e.oxw();return e.KtG(m.updateObjectiveComplete(i,n,d,n.complete))}),e.qZA(),e._UZ(46,"p-confirmPopup",66,67),e.qZA(),e.TgZ(48,"td")(49,"div",68)(50,"i",69),e.NdJ("click",function(){const l=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.viewFiles(l))}),e.qZA(),e.YNc(51,rt,2,0,"i",70),e.qZA()(),e.TgZ(52,"td")(53,"div",71)(54,"i",72),e.NdJ("click",function(){const l=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.updateSubGoal(l))}),e.qZA(),e.TgZ(55,"i",73),e.NdJ("click",function(){const l=e.CHM(t).$implicit,n=e.oxw();return e.KtG(n.deleteSubGoal(l.id,l.goalId))}),e.qZA(),e._UZ(56,"p-confirmPopup",74),e.qZA()()()}if(2&a){const t=s.$implicit,o=s.rowIndex,i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,25,t.goals.goals)," "),e.xp6(3),e.hij(" ",e.lcZ(6,27,t.goals.budget)," "),e.xp6(3),e.hij(" ",e.lcZ(9,29,t.functional_objective)," "),e.xp6(3),e.hij(" ",e.lcZ(12,31,t.performance_indicator)," "),e.xp6(3),e.hij(" ",e.lcZ(15,33,t.target)," "),e.xp6(3),e.hij(" ",e.lcZ(18,35,t.formula)," "),e.xp6(3),e.hij(" ",e.lcZ(21,37,t.programs)," "),e.xp6(3),e.hij(" ",e.lcZ(24,39,t.responsible_persons)," "),e.xp6(3),e.hij(" ",e.lcZ(27,41,t.clients)," "),e.xp6(3),e.AsE(" ",e.xi3(30,43,t.timetable[0],"shortDate")," - ",e.xi3(31,46,t.timetable[1],"shortDate")," "),e.xp6(4),e.hij(" ",e.lcZ(34,49,t.frequency_monitoring)," "),e.xp6(3),e.hij(" ",e.lcZ(37,51,t.data_source)," "),e.xp6(3),e.hij(" ",e.lcZ(40,53,t.budget)," "),e.xp6(3),e.hij(" ",e.xi3(43,55,t.createdAt,"mediumDate")," "),e.xp6(3),e.Q6J("text",!0)("raised",!0)("severity",t.complete?"success":"warning")("icon",t.complete?"pi pi-check":"pi pi-times")("label",t.complete?"Yes":"No")("disabled",!("user"!==i.role||!t.complete))("pTooltip","user"===i.role?"Only Admin can enable this button":"")("tooltipPosition",i.top)("loading",i.onclickCompletionButton[o]),e.xp6(6),e.um2(51,"admin"===i.role?51:-1)}}function ct(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",76),e._uU(2,"No Objectives found."),e.qZA()())}function pt(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",76),e._uU(2," Loading Objectives data. Please wait. "),e.qZA()())}function ut(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",38)(1,"button",77),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),l=e.MAs(17);return e.KtG(i.clear(l))}),e.qZA(),e.TgZ(2,"p-button",78),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addFiles())}),e.qZA(),e.TgZ(3,"span",40),e._UZ(4,"i",41),e.TgZ(5,"input",79,43),e.NdJ("input",function(i){e.CHM(t);const l=e.oxw(),n=e.MAs(17);return e.KtG(l.onGlobalFilter(n,i))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.blockedPanel),e.xp6(1),e.Q6J("disabled",t.blockedPanel)("outlined",!0),e.xp6(3),e.Q6J("disabled",t.blockedPanel)}}function gt(a,s){1&a&&(e.TgZ(0,"tr")(1,"th",44)(2,"div",45),e._uU(3," File "),e.qZA()(),e.TgZ(4,"th",44)(5,"div",45),e._uU(6," Date Added "),e.qZA()(),e.TgZ(7,"th",64)(8,"div",45),e._uU(9," Options "),e.qZA()()())}function mt(a,s){1&a&&e._UZ(0,"i",84)}function bt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"i",73),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,l=e.oxw();return e.KtG(l.deleteSubGoalFile(i.id,i.source))}),e.qZA()}}function ht(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td")(2,"a",80),e._UZ(3,"i",81),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"td")(8,"div",71),e.YNc(9,mt,1,0,"i",82)(10,bt,1,0),e._UZ(11,"p-confirmPopup",83),e.qZA()()()),2&a){const t=s.$implicit,o=e.oxw();e.xp6(2),e.Q6J("href",o.auth.domain+"/images/files/"+t.source,e.LSH),e.xp6(1),e.Q6J("ngClass",o.getIcon(t.source.split(".").pop().toLowerCase())),e.xp6(2),e.hij(" ",e.xi3(6,4,t.date_added,"mediumDate")," "),e.xp6(4),e.um2(9,o.blockedPanel?9:10)}}function _t(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",76),e._uU(2,"No Files found."),e.qZA()())}function ft(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",76),e._uU(2,"Loading Files data. Please wait."),e.qZA()())}function vt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"p-button",85),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hideViewFileDialogCard())}),e.qZA()}2&a&&e.Q6J("text",!0)}function Zt(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"div",38)(1,"button",39),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),l=e.MAs(17);return e.KtG(i.clear(l))}),e.qZA(),e.TgZ(2,"span",40),e._UZ(3,"i",41),e.TgZ(4,"input",42,43),e.NdJ("input",function(i){e.CHM(t);const l=e.oxw(),n=e.MAs(17);return e.KtG(l.onGlobalFilter(n,i))}),e.qZA()()()}}function Ct(a,s){1&a&&(e.TgZ(0,"tr")(1,"th",44)(2,"div",45),e._uU(3," File "),e.qZA()(),e.TgZ(4,"th",44)(5,"div",45),e._uU(6," Date Added "),e.qZA()(),e.TgZ(7,"th",44)(8,"div",45),e._uU(9," Date Deleted "),e.qZA()(),e.TgZ(10,"th",44)(11,"div",45),e._uU(12," Status "),e.qZA()()())}function xt(a,s){if(1&a&&(e.TgZ(0,"tr")(1,"td")(2,"a",80),e._UZ(3,"i",81),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"date"),e.qZA(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.ALo(10,"date"),e.qZA()(),e.TgZ(11,"td")(12,"span"),e._uU(13),e.qZA()()()),2&a){const t=s.$implicit,o=e.oxw();e.xp6(2),e.Q6J("href",o.auth.domain+"/images/files/"+t.source,e.LSH),e.xp6(1),e.Q6J("ngClass",o.getIcon(t.source.split(".").pop().toLowerCase())),e.xp6(2),e.hij(" ",e.xi3(6,9,t.date_added,"medium")," "),e.xp6(3),e.Tol("cursor-pointer  customer-badge status-"+(t.status?"active":"inactive")),e.xp6(1),e.hij(" ",e.xi3(10,12,t.updatedAt,"medium"),""),e.xp6(3),e.Tol("cursor-pointer  customer-badge status-"+(t.status?"active":"inactive")),e.xp6(1),e.Oqu(t.status?"Active":"Deleted")}}function jt(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",76),e._uU(2,"No Files found."),e.qZA()())}function yt(a,s){1&a&&(e.TgZ(0,"tr")(1,"td",76),e._uU(2,"Loading Files data. Please wait."),e.qZA()())}function At(a,s){if(1&a){const t=e.EpF();e.TgZ(0,"p-button",85),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.hideViewFileHistoryDialogCard())}),e.qZA()}2&a&&e.Q6J("text",!0)}const Tt=()=>["goals.goals","goals.budget","functional_objective","performance_indicator","target","formula","programs","department","responsible_persons","clients","timetable","frequency_monitoring","data_source","budget","createdAt","Files","options"],D=()=>({"min-width":"50rem"}),z=()=>({width:"60rem"}),O=()=>({"1199px":"75vw","575px":"90vw"}),K=()=>["name","code","options"],$=()=>({width:"50rem"});let Ot=(()=>{class a{constructor(t,o,i,l,n,d,m,p,_){this.obj=t,this.messageService=o,this.confirmationService=i,this.dialogService=l,this.fileService=n,this.formBuilder=d,this.auth=m,this.goal=p,this.cd=_,this.objectiveSubscription=new f.x,this.objectives=[],this.objectiveDatas=[],this.onclickCompletionButton=[],this.AllObjectivesFiles=[],this.uploadedFiles=[],this.AllObjectivesHistoryFiles=[],this.loading=!0,this.addObjectiveGoalDialogCard=!1,this.USERID=this.auth.getTokenUserID(),this.role=this.auth.getUserRole(),this.getAllobjectivesGoalsUsers()}ngOnInit(){this.getAllobjectivesGoalsUsers(),this.createaddFileForm(),this.dropdwonSelection=[{name:"daily",code:"Daily"},{name:"weekly",code:"Weekly"},{name:"monthly",code:"Monthly"},{name:"yearly",code:"Yearly"},{name:"quarterly",code:"Quarterly"},{name:"biannually",code:"Biannually"}],this.createAddObjectiveGoalform(),this.formGroupDropdown=new r.cw({selectedDropdown:new r.NI})}createaddFileForm(){this.addFileForm=this.formBuilder.group({files:["",[r.kI.required]]})}getAllobjectives(){var t=this;this.loading=!0,this.obj.getRoute("get","objectives","getAllObjectives/"+this.USERID).pipe((0,u.R)(this.objectiveSubscription)).subscribe(function(){var o=(0,b.Z)(function*(i){t.objectiveDatas=yield i.Objectives;for(let l=0;l<t.objectiveDatas.length;l++)t.onclickCompletionButton[l]=!1;t.loading=!1,t.cd.detectChanges()});return function(i){return o.apply(this,arguments)}}())}getAllobjectivesGoalsUsers(){this.loading=!0,this.obj.getRoute("get","objectives","getAllByIdObjectivesWithGoalsAndUsers/"+this.USERID).pipe((0,u.R)(this.objectiveSubscription)).subscribe(t=>{this.objectiveDatas=t.data,this.loading=!1})}createAddObjectiveGoalform(){this.addObjectiveGoalform=this.formBuilder.group({userId:["",[r.kI.required]],goalId:["",[r.kI.required]],functional_objective:["",[r.kI.required]],performance_indicator:["",[r.kI.required]],target:["",[r.kI.required]],formula:["",[r.kI.required]],programs:["",[r.kI.required]],responsible_persons:["",[r.kI.required]],clients:["",[r.kI.required]],timetable:["",[r.kI.required]],frequency_monitoring:["",[r.kI.required]],data_source:["",[r.kI.required]],budget:["",[r.kI.required]]})}updateObjectiveComplete(t,o,i=0,l){var n=this;if(this.onclickCompletionButton[i]=!0,!0===l&&"user"===this.role)return this.messageService.add({severity:"error  ",summary:"Nice Try!!!",detail:"Only Admin can enable this.."}),void(this.onclickCompletionButton[i]=!1);this.confirmationService.confirm({key:"updateObjectiveComplete",target:t.target,message:`Marking Objective ${l?"as Incomplete":" as Complete? Will Lock Files"}, Are You Sure?`,header:"Confirmation",icon:"pi pi-exclamation-triangle",acceptIcon:"none",rejectIcon:"none",rejectButtonStyleClass:"p-button-text",accept:()=>{this.loading=!0,this.obj.getRoute("put","objectives","updateobjectivecompletion",{id:o.id}).pipe((0,u.R)(this.objectiveSubscription)).subscribe(function(){var m=(0,b.Z)(function*(p){p.success?(n.messageService.add({severity:"success  ",summary:"Done",detail:p.message,life:5e3}),n.getAllobjectivesGoalsUsers(),n.loading=!1):n.messageService.add({severity:"error  ",summary:"Error",detail:p.message})});return function(p){return m.apply(this,arguments)}}()),this.onclickCompletionButton[i]=!1},reject:()=>{this.onclickCompletionButton[i]=!1,this.messageService.add({severity:"info",summary:"Done",detail:"Nothing happens",life:3e3})}})}viewFiles(t){var o=this;return(0,b.Z)(function*(){o.blockedPanel=t.complete,o.viewObjectiveFileDialogCard=!0,o.objectiveIDforFile=t.id,o.getAllFilesFromObjectiveLoad(o.USERID,t.id)})()}hideViewFileDialogCard(){this.objectiveIDforFile=null,this.viewObjectiveFileDialogCard=!1}addFiles(t){this.addObjectiveFileDialogCard=!0}getAllFilesFromObjectiveLoad(t,o){var i=this;return(0,b.Z)(function*(){return i.loading=!0,i.fileService.getAllFilesFromObjective(t,o).pipe((0,u.R)(i.objectiveSubscription)).subscribe(l=>{i.AllObjectivesFiles=l.data,i.loading=!1}),!0})()}onUpload(t){for(const o of t.files)this.uploadedFiles.push(o);this.validateFileType(this.uploadedFiles)||(this.messageService.add({severity:"error",summary:"File Unsupported",detail:"Unsupported file type! Please select only images, documents, or spreadsheets"}),t.preventDefault()),this.fileService.addMultipleFiles(this.USERID,this.objectiveIDforFile,this.uploadedFiles).pipe((0,u.R)(this.objectiveSubscription)).subscribe(o=>{this.AllObjectivesFiles=[],this.getAllFilesFromObjectiveLoad(this.USERID,this.objectiveIDforFile),o.success?(this.messageService.add({severity:"success  ",summary:"View the files",detail:"Files added successfully"}),this.addObjectiveFileDialogCard=!1,this.addFileForm.reset(),this.uploadedFiles=[],this.viewObjectiveFileDialogCard=!1):this.messageService.add({severity:"error  ",summary:"Error",detail:o.message})})}clearAddObjectiveGoalDialogCardDatas(){this.addObjectiveGoalDialogCard=!1,this.updateObjectiveGoalFlag=!1,this.tobeUpdatedSubGoal=null,this.addObjectiveGoalform.reset()}updateSubGoal(t){this.tobeUpdatedSubGoal=t.id,this.addObjectiveGoalform.reset(),this.updateObjectiveGoalFlag=!0,this.addObjectiveGoalDialogCard=!0,this.formGroupDropdown.setValue({selectedDropdown:this.dropdwonSelection.find(o=>o.name===t.frequency_monitoring)||{name:"daily",code:"Daily"}}),this.addObjectiveGoalform.patchValue({userId:t.userId,goalId:t.goalId,functional_objective:t.functional_objective,performance_indicator:t.performance_indicator,target:t.target,formula:t.formula,programs:t.programs,responsible_persons:t.responsible_persons,clients:t.clients,timetable:[new Date(t.timetable[0]),new Date(t.timetable[1])],frequency_monitoring:t.frequency_monitoring,data_source:t.data_source,budget:t.budget})}updateSubObjectiveGoalDialogExec(t){this.loading=!0,t.value.id=this.tobeUpdatedSubGoal,t.value.frequency_monitoring=this.formGroupDropdown.value.selectedDropdown.name,this.obj.getRoute("put","objectives","updateObjectives",t.value).pipe((0,u.R)(this.objectiveSubscription)).subscribe(o=>{o.success?(this.getAllobjectivesGoalsUsers(),this.getAllFilesFromObjectiveLoad(this.USERID,this.objectiveIDforFile),this.addObjectiveGoalDialogCard=!1,this.messageService.add({severity:"success  ",summary:"Done",detail:o.message}),this.loading=!1):this.messageService.add({severity:"error  ",summary:"Error",detail:o.message})})}validateFileType(t){const o=["image/jpeg","image/png","image/svg+xml","image/gif","image/x-jif","image/x-jiff","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/csv","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","text/plain","application/zip","image/x-photoshop","image/vnd.dxf","audio/mpeg","audio/wav","audio/aac"];for(const i of t)if(!o.includes(i.type))return console.log(`Invalid file type: ${i.type}`),!1;return!0}viewFilesHistory(t){this.viewObjectiveFileHistoryDialogCard=!0,this.getAllFilesHistoryFromObjectiveLoad(this.USERID,t.id)}getAllFilesHistoryFromObjectiveLoad(t,o){var i=this;return(0,b.Z)(function*(){return i.loading=!0,i.fileService.getAllFilesHistoryFromObjectiveLoad(t,o).pipe((0,u.R)(i.objectiveSubscription)).subscribe(l=>{i.AllObjectivesHistoryFiles=l.data,i.loading=!1}),!0})()}hideViewFileHistoryDialogCard(){this.viewObjectiveFileHistoryDialogCard=!1}getIcon(t){switch(t.split(".").pop()){case"jpg":case"jpeg":case"png":case"gif":case"svg":case"psd":case"dxf":return"pi pi-image";case"doc":case"docx":case"rtf":return"pi pi-file-word";case"pdf":return"pi pi-file-pdf";case"xls":case"xlsx":return"pi pi-file-excel";case"csv":return"pi pi-file-csv";case"ppt":case"pptx":return"pi pi-file-powerpoint";case"txt":return"pi pi-ticket";case"zip":return"pi pi-file-zip";case"mp3":case"wav":case"aac":return"pi pi-volume-up";default:return"pi pi-file"}}deleteSubGoal(t,o){this.confirmationService.confirm({key:"deleteSubGoal",target:event.target||new EventTarget,message:"Deleting Objectives Will Delete All Files. Continue?",icon:"pi pi-exclamation-triangle",accept:()=>{this.loading=!0,this.goal.getRoute("put","objectives","setInactiveObjectives",{id:t}).pipe((0,u.R)(this.objectiveSubscription)).subscribe(i=>{i.success?(this.getAllobjectives(),this.loading=!1,this.messageService.add({severity:"success  ",summary:"Done",detail:i.message})):this.messageService.add({severity:"error  ",summary:"Error",detail:i.message})})}})}deleteSubGoalFile(t,o){this.confirmationService.confirm({key:"deleteSubGoalFile",target:event.target||new EventTarget,message:"Delete File",icon:"pi pi-exclamation-triangle",accept:()=>{this.fileService.deleteFileObjective({id:t,source:o}).pipe((0,u.R)(this.objectiveSubscription)).subscribe(i=>{i.success?(this.getAllobjectives(),this.messageService.add({severity:"success  ",summary:"Done",detail:i.message}),this.viewObjectiveFileDialogCard=!1):this.messageService.add({severity:"error  ",summary:"Error",detail:i.message})})}})}clear(t){t.clear(),this.filter.nativeElement.value=""}onGlobalFilter(t,o){t.filterGlobal(o.target.value,"contains")}ngOnDestroy(){this.objectiveSubscription.unsubscribe()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(x.v),e.Y36(h.ez),e.Y36(h.YP),e.Y36(at.xA),e.Y36(P.I),e.Y36(r.qu),e.Y36(v.e),e.Y36(C.O),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-objectives"]],viewQuery:function(o,i){if(1&o&&e.Gf(lt,5),2&o){let l;e.iGM(l=e.CRH())&&(i.filter=l.first)}},decls:92,vars:78,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"add-user-heading"],[1,"text-xl","font-medium","mt-2","text-slate-950"],["dataKey","id","styleClass","p-datatable-gridlines","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields","tableStyle"],["dt2",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["responsiveLayout","stack","position","top",3,"header","modal","visible","breakpoints","maximizable","closable","visibleChange"],["dt3",""],["pTemplate","footer"],["styleClass","addObjective","header","Drag and Drop Files","position","top",3,"visible","modal","breakpoints","visibleChange"],[1,"p-fluid"],[3,"formGroup"],["name","files","customUpload","true","multiple","true","maxFileSize","20000000","formControlName","files","ngDefaultControl","",3,"files","uploadHandler"],["styleClass","addObjective","position","top",3,"header","visible","modal","breakpoints","visibleChange","onHide"],[1,"field","col-10","md:col-10"],[1,"field"],["htmlFor","name1"],["pInputText","","id","functional_objective","autocomplete","off","formControlName","functional_objective","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","performance_indicator","autocomplete","off","formControlName","performance_indicator","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","target","autocomplete","off","formControlName","target","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","formula","autocomplete","off","formControlName","formula","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","programs","autocomplete","off","formControlName","programs","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","responsible_persons","autocomplete","off","formControlName","responsible_persons","required","",1,"flex-auto",3,"ngClass"],["pInputText","","id","clients","autocomplete","off","formControlName","clients","required","",1,"flex-auto",3,"ngClass"],["formControlName","timetable","selectionMode","range",3,"readonlyInput"],["htmlFor","department"],["formControlName","selectedDropdown","optionLabel","name","placeholder","Select a Frequency",3,"options"],["pInputText","","id","data_source","autocomplete","off","formControlName","data_source","required","",1,"flex-auto",3,"ngClass"],["mode","decimal","formControlName","budget",3,"min","showButtons"],[1,"flex","justify-space-between","gap-2"],["label","Cancel","severity","secondary",3,"click"],["label","Update",3,"click"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search Keyword",1,"p-inputtext","p-component","p-element","w-full",3,"input"],["filter",""],[2,"min-width","12rem"],[1,"flex","justify-content-between","align-items-center"],["type","text","field","goals.goals","display","menu","placeholder","Search by Office"],["type","text","field","goals.budget","display","menu","placeholder","Search by Goal Budget"],["type","text","field","functional_objective","display","menu","placeholder","Search by Functional Objective"],["type","text","field","performance_indicator","display","menu","placeholder","Search by Performance Indicator"],["type","text","field","target","display","menu","placeholder","Search by Target"],["type","text","field","formula","display","menu","placeholder","Search by Formula"],["type","text","field","programs","display","menu","placeholder","Search by Programs"],["type","text","field","responsible_persons","display","menu","placeholder","Search by Responsible Persons"],["type","text","field","clients","display","menu","placeholder","Search by Clients"],["type","text","field","timetable","display","menu","placeholder","Search by Timetable"],[2,"min-width","4rem"],["type","text","field","frequency_monitoring","display","menu","placeholder","Search by Frequency Monitoring"],["type","text","field","data_source","display","menu","placeholder","Search by Data Source"],["type","text","field","budget","display","menu","placeholder","Search by Budget"],["type","text","field","createdAt","display","menu","placeholder","eg. 2024-06-28"],["type","text","field","complete","display","menu","placeholder","Search by Completion"],[2,"min-width","6rem"],["type","text","field","createdAt","display","menu","placeholder","Search by Files"],[2,"min-width","9rem"],[3,"text","raised","severity","icon","label","disabled","pTooltip","tooltipPosition","loading","loadingChange","click"],["key","updateObjectiveComplete"],["confirmPopupRef",""],[1,"flex","flex-row","align-items-center"],["pTooltip","File List","tooltipPosition","top",1,"pi","pi-folder","text-2xl","hover:text-4xl","text-yellow-400","transition","ease-in-out","duration-200","hover:pi-folder-open","cursor-pointer",3,"click"],["pTooltip","File History","tooltipPosition","top","class","pi pi-cog text-2xl hover:text-4xl text-yellow-400 transition ease-in-out duration-200 hover:pi-cog cursor-pointer"],[1,"options-users"],[1,"pi","pi-file-edit","text-xl",2,"color","#0ea5e9","cursor","pointer",3,"click"],[1,"pi","pi-trash","text-xl",2,"color","#ef4444","cursor","pointer",3,"click"],["key","deleteSubGoal"],["pTooltip","File History","tooltipPosition","top",1,"pi","pi-cog","text-2xl","hover:text-4xl","text-yellow-400","transition","ease-in-out","duration-200","hover:pi-cog","cursor-pointer",3,"click"],["colspan","8"],["pButton","","label","Clear","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"disabled","click"],["icon","pi pi-upload","severity","success","pTooltip","Add Files","tooltipPosition","top",3,"disabled","outlined","click"],["pInputText","","type","text","placeholder","Search Keyword",1,"p-inputtext","p-component","p-element","w-full",3,"disabled","input"],["target","_blank",3,"href"],[1,"text-4xl",3,"ngClass"],["class","pi pi-trash text-xl","style","color: #868585"],["key","deleteSubGoalFile"],[1,"pi","pi-trash","text-xl",2,"color","#868585"],["label","Cancel","severity","secondary",3,"text","click"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._uU(5,"Objectives"),e.qZA()(),e.TgZ(6,"p-table",5,6),e.YNc(8,nt,6,0,"ng-template",7)(9,st,68,0,"ng-template",8)(10,dt,57,58,"ng-template",9)(11,ct,3,0,"ng-template",10)(12,pt,3,0,"ng-template",11),e.qZA()()()(),e.TgZ(13,"p-dialog",12),e.NdJ("visibleChange",function(n){return i.viewObjectiveFileDialogCard=n}),e.TgZ(14,"div",0)(15,"div",1)(16,"p-table",5,13),e.YNc(18,ut,7,4,"ng-template",7)(19,gt,10,0,"ng-template",8)(20,ht,12,7,"ng-template",9)(21,_t,3,0,"ng-template",10)(22,ft,3,0,"ng-template",11),e.qZA()()(),e.YNc(23,vt,1,1,"ng-template",14),e.qZA(),e.TgZ(24,"p-dialog",15),e.NdJ("visibleChange",function(n){return i.addObjectiveFileDialogCard=n}),e.TgZ(25,"div",16)(26,"form",17)(27,"p-fileUpload",18),e.NdJ("uploadHandler",function(n){return i.onUpload(n)}),e.qZA()()(),e._uU(28," \xa0\xa0\n"),e.qZA(),e.TgZ(29,"p-dialog",19),e.NdJ("visibleChange",function(n){return i.addObjectiveGoalDialogCard=n})("onHide",function(){return i.clearAddObjectiveGoalDialogCardDatas()}),e.TgZ(30,"div",16)(31,"div",20)(32,"form",17)(33,"div",21)(34,"label",22),e._uU(35,"Functional Objective"),e.qZA(),e._UZ(36,"input",23),e.qZA(),e.TgZ(37,"div",21)(38,"label",22),e._uU(39,"Performance Indicator"),e.qZA(),e._UZ(40,"input",24),e.qZA(),e.TgZ(41,"div",21)(42,"label",22),e._uU(43,"Target"),e.qZA(),e._UZ(44,"input",25),e.qZA(),e.TgZ(45,"div",21)(46,"label",22),e._uU(47,"Formula"),e.qZA(),e._UZ(48,"input",26),e.qZA(),e.TgZ(49,"div",21)(50,"label",22),e._uU(51,"Programs"),e.qZA(),e._UZ(52,"input",27),e.qZA(),e.TgZ(53,"div",21)(54,"label",22),e._uU(55,"Responsible Persons"),e.qZA(),e._UZ(56,"input",28),e.qZA(),e.TgZ(57,"div",21)(58,"label",22),e._uU(59,"Clients"),e.qZA(),e._UZ(60,"input",29),e.qZA(),e.TgZ(61,"div",21)(62,"label",22),e._uU(63,"Timetable"),e.qZA(),e._UZ(64,"p-calendar",30),e.qZA(),e.TgZ(65,"div",21)(66,"label",31),e._uU(67,"Frequency Monitoring"),e.qZA(),e.TgZ(68,"form",17),e._UZ(69,"p-dropdown",32),e.qZA()(),e.TgZ(70,"div",21)(71,"label",22),e._uU(72,"Means of Verification(Data Source)"),e.qZA(),e._UZ(73,"input",33),e.qZA(),e.TgZ(74,"div",21)(75,"label",22),e._uU(76," budget "),e.qZA(),e._UZ(77,"p-inputNumber",34),e.qZA()()()(),e.TgZ(78,"div",35)(79,"p-button",36),e.NdJ("click",function(){return i.clearAddObjectiveGoalDialogCardDatas()}),e.qZA(),e.TgZ(80,"p-button",37),e.NdJ("click",function(){return i.updateSubObjectiveGoalDialogExec(i.addObjectiveGoalform)}),e.qZA()()(),e.TgZ(81,"p-dialog",12),e.NdJ("visibleChange",function(n){return i.viewObjectiveFileHistoryDialogCard=n}),e.TgZ(82,"div",0)(83,"div",1)(84,"p-table",5,13),e.YNc(86,Zt,6,0,"ng-template",7)(87,Ct,13,0,"ng-template",8)(88,xt,14,15,"ng-template",9)(89,jt,3,0,"ng-template",10)(90,yt,3,0,"ng-template",11),e.qZA()()(),e.YNc(91,At,1,1,"ng-template",14),e.qZA()),2&o&&(e.xp6(6),e.Q6J("value",i.objectiveDatas)("rows",10)("loading",i.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(64,Tt))("tableStyle",e.DdM(65,D)),e.xp6(7),e.Akn(e.DdM(66,z)),e.Q6J("header",i.blockedPanel?"Files Locked: Objective Marked Complete":"File List")("modal",!0)("visible",i.viewObjectiveFileDialogCard)("breakpoints",e.DdM(67,O))("maximizable",!0)("closable",!1),e.xp6(3),e.Q6J("value",i.AllObjectivesFiles)("rows",5)("loading",i.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(68,K))("tableStyle",e.DdM(69,D)),e.xp6(8),e.Akn(e.DdM(70,$)),e.Q6J("visible",i.addObjectiveFileDialogCard)("modal",!0)("breakpoints",e.DdM(71,O)),e.xp6(2),e.Q6J("formGroup",i.addFileForm),e.xp6(1),e.Q6J("files",i.uploadedFiles),e.xp6(2),e.Akn(e.DdM(72,$)),e.Q6J("header","Add  Objectives")("visible",i.addObjectiveGoalDialogCard)("modal",!0)("breakpoints",e.DdM(73,O)),e.xp6(3),e.Q6J("formGroup",i.addObjectiveGoalform),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("functional_objective").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.functional_objective.errors&&i.addObjectiveGoalform.controls.functional_objective.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("performance_indicator").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.performance_indicator.errors&&i.addObjectiveGoalform.controls.performance_indicator.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("target").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.target.errors&&i.addObjectiveGoalform.controls.target.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("formula").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.formula.errors&&i.addObjectiveGoalform.controls.formula.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("programs").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.programs.errors&&i.addObjectiveGoalform.controls.programs.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("responsible_persons").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.responsible_persons.errors&&i.addObjectiveGoalform.controls.responsible_persons.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("clients").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.clients.errors&&i.addObjectiveGoalform.controls.clients.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("readonlyInput",!0),e.xp6(4),e.Q6J("formGroup",i.formGroupDropdown),e.xp6(1),e.Q6J("options",i.dropdwonSelection),e.xp6(4),e.Q6J("ngClass",null!=i.addObjectiveGoalform&&i.addObjectiveGoalform.get("data_source").touched&&null!=i.addObjectiveGoalform&&null!=i.addObjectiveGoalform.controls.data_source.errors&&i.addObjectiveGoalform.controls.data_source.errors.required?"ng-invalid ng-dirty":""),e.xp6(4),e.Q6J("min",0)("showButtons",!0),e.xp6(4),e.Akn(e.DdM(74,z)),e.Q6J("header","File History List")("modal",!0)("visible",i.viewObjectiveFileHistoryDialogCard)("breakpoints",e.DdM(75,O))("maximizable",!0)("closable",!1),e.xp6(3),e.Q6J("value",i.AllObjectivesHistoryFiles)("rows",5)("loading",i.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(76,K))("tableStyle",e.DdM(77,D)))},dependencies:[g.mk,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,I.u,Z.iA,h.jx,Z.xl,j.Hq,j.zx,J.V,N.f,R.o,H.Lt,L.Rn,B.P,A.p,g.rS,g.uU,T.vZ],styles:['@charset "UTF-8";.options-users[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center}.customer-badge.status-active[_ngcontent-%COMP%]{background:#c8e6c9;color:#256029}.customer-badge.status-inactive[_ngcontent-%COMP%]{background:#ffcdd2;color:#c63737}.customer-badge.status-pending[_ngcontent-%COMP%]{background:#ffd8b2;color:#805b36}  .p-dialog-content{overflow-y:visible!important}  .footer-button{display:flex;justify-content:space-evenly}.add-user-heading[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 0 1.5rem}  .footer-button{gap:8rem!important}  .addObjective{overflow-y:auto}  .pi-folder:hover{transform:scale(1.2)}  .hover\\:pi-folder-open:hover:before{content:"\\1f4c2"}  .hover\\:pi-cog:hover:before{content:"\\2699\\fe0f"}  .p-fileupload-row>div:first-child{display:none!important}  .p-inputswitch.p-inputswitch-checked .p-inputswitch-slider{background:#41c5b7}  .p-overlaypanel .p-overlaypanel-content{padding:0!important}  p-panel{width:100%!important;z-index:9999999999}  .p-blockui{z-index:9999999999;top:0;left:0;width:100%;height:100%;background-color:transparent;transition-property:background-color;align-items:center;justify-content:center}  .p-blockui.p-component-overlay{position:absolute;display:flex}']})}return a})();var W=c(3491),Gt=c(949),Ut=c(3380);const qt=["messageInput"],Dt=["messagesContent"];function wt(a,s){1&a&&(e.TgZ(0,"div",18),e._UZ(1,"span"),e.qZA())}const Ft=(a,s,t)=>({"message-personal":a,"message-ai":s,loading:t});function kt(a,s){if(1&a&&(e.TgZ(0,"div",14),e._UZ(1,"markdown",15),e.ALo(2,"async"),e.ALo(3,"markdown"),e._UZ(4,"div",16),e.YNc(5,wt,2,0,"div",17),e.qZA()),2&a){const t=s.$implicit;e.Q6J("ngClass",e.kEZ(7,Ft,t.isPersonal,!t.isPersonal,t.isLoading)),e.xp6(1),e.Q6J("data",e.lcZ(2,3,e.lcZ(3,5,t.text))),e.xp6(4),e.Q6J("ngIf",t.isLoading)}}let St=(()=>{class a{constructor(t,o){this.chatService=t,this.auth=o,this.messages=[],this.newMessageText="",this.getAisub=new f.x,this.initialGreetingShown=!1,this.userId=this.auth.getTokenUserID()}ngOnInit(){this.getAllMessages(),this.cities=[{name:"New Chat",code:"newChat"},{name:"Rome",code:"RM"},{name:"London",code:"LDN"},{name:"Istanbul",code:"IST"},{name:"Paris",code:"PRS"}]}showInitialGreeting(){this.initialGreetingShown||(this.messages.push({text:"Hey there! \u{1f44b} I'm your CHMSU QOAP Assistant, here to help you reach for the stars! \u2728 Let's set some awesome goals together. \u{1f680}",isPersonal:!1,isLoading:!1}),this.initialGreetingShown=!0)}getAllMessages(){var t=this;return(0,b.Z)(function*(){t.chatService.getRoute("get","ai",`get-all-chat/${t.userId}`).pipe((0,u.R)(t.getAisub)).subscribe(o=>{o.chats.map(i=>{t.messages.push({text:i.prompt,isPersonal:!0,isLoading:!1,mark:(0,W.TU)(i.prompt)}),t.messages.push({text:i.responseAi,isPersonal:!1,isLoading:!1,mark:(0,W.TU)(i.responseAi)})}),t.scrollToBottom(),t.showInitialGreeting()}),t.scrollToBottom()})()}sendMessage(){let t="";""!==this.newMessageText.trim()&&(this.messages.push({text:this.newMessageText,isPersonal:!0}),t=this.newMessageText,this.newMessageText=null,this.messages.push({text:"",isPersonal:!1,isLoading:!0}),this.chatService.getRoute("post","ai","chat-with-gemini",{message:t,newChat:this.newChatFlag,userId:this.auth.getTokenUserID()}).pipe((0,u.R)(this.getAisub)).subscribe(o=>{this.messages.pop(),this.messages.push({text:o.response,isPersonal:!1,isLoading:!1}),t="",this.newChatFlag=!1,this.scrollToBottom()}))}scrollToBottom(){this.messagesContent?.nativeElement&&(this.messagesContent.nativeElement.scrollTop=this.messagesContent.nativeElement.scrollHeight)}ngAfterViewChecked(){this.scrollToBottom()}ngOnDestroy(){this.getAisub.unsubscribe()}onEnter(t){this.sendMessage()}onCityChange(t){"newChat"===t.value.code?this.newChat():this.selectedCity=t.value}newChat(){this.messages=[],this.newChatFlag=!0,this.ngAfterViewChecked(),this.scrollToBottom()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(Gt.p),e.Y36(v.e))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-ai"]],viewQuery:function(o,i){if(1&o&&(e.Gf(qt,5),e.Gf(Dt,5)),2&o){let l;e.iGM(l=e.CRH())&&(i.messageInput=l.first),e.iGM(l=e.CRH())&&(i.messagesContent=l.first)}},decls:16,vars:2,consts:[[1,"col-12"],[1,"card"],[1,"text-xs","font-italic","bg-[#dbdbdb]"],[1,"chat"],[1,"chat-title"],[1,"pi","pi-google"],[1,"messages"],["messagesContent",""],[1,"messages-content"],["class","message",3,"ngClass",4,"ngFor","ngForOf"],[1,"message-box",3,"keydown.enter"],["type","text","placeholder","Type message...",1,"message-input",3,"ngModel","ngModelChange"],["messageInput",""],[1,"message-submit",3,"click"],[1,"message",3,"ngClass"],[3,"data"],[1,"my-1"],["class","loading",4,"ngIf"],[1,"loading"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3," Note: Dont post sensitive data"),e.qZA(),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"i",5),e.qZA(),e.TgZ(7,"div",6,7)(9,"div",8),e.YNc(10,kt,6,11,"div",9),e.qZA()(),e.TgZ(11,"div",10),e.NdJ("keydown.enter",function(n){return i.onEnter(n)}),e.TgZ(12,"textarea",11,12),e.NdJ("ngModelChange",function(n){return i.newMessageText=n}),e.qZA(),e.TgZ(14,"button",13),e.NdJ("click",function(){return i.sendMessage()}),e._uU(15," Send "),e.qZA()()()()()),2&o&&(e.xp6(10),e.Q6J("ngForOf",i.messages),e.xp6(2),e.Q6J("ngModel",i.newMessageText))},dependencies:[g.mk,g.sg,g.O5,r.Fj,r.JJ,r.On,Ut.lF,g.Ov,T.NO],styles:['*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box;padding:0;margin:0}body[_ngcontent-%COMP%]{font-family:Open Sans,sans-serif;font-size:12px;line-height:1.3;overflow:hidden}.layout-main-container[_ngcontent-%COMP%]{max-height:100dvh!important}.card[_ngcontent-%COMP%]{max-height:calc(100dvh - 180px);overflow:hidden}.chat[_ngcontent-%COMP%]{width:100%;height:calc(100dvh - 252px);z-index:2;overflow:hidden;background:#fff;display:flex;justify-content:space-between;flex-direction:column}.chat-title[_ngcontent-%COMP%]{flex:0 1 45px;position:relative;z-index:2;background:#dbdbdb;color:#444;text-transform:uppercase;text-align:left;padding:20px}.messages[_ngcontent-%COMP%]{flex:1 1 auto;color:#ffffff80;overflow:auto;position:relative;width:100%}.messages[_ngcontent-%COMP%]   .messages-content[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:101%;width:100%;padding:10px}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{clear:both;float:left;padding:10px 15px 7.5px;border-radius:10px 10px 10px 0;background:rgba(0,0,0,.3);font-size:14px;line-height:1.4;margin:8px 0 8px 20px;position:relative;text-shadow:0 1px 1px rgba(0,0,0,.2)}.messages[_ngcontent-%COMP%]   .message.timestamp[_ngcontent-%COMP%]{position:absolute;bottom:-15px;font-size:9px;color:#ffffff4d}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;border-top:6px solid rgba(0,0,0,.3);left:0;border-right:7px solid transparent}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{position:absolute;z-index:1;bottom:-15px;left:-35px;border-radius:30px;width:30px;height:30px;overflow:hidden;margin:0;padding:0;border:2px solid rgba(255,255,255,.24)}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.messages[_ngcontent-%COMP%]   .message.message-personal[_ngcontent-%COMP%]{float:right;text-align:right;border-radius:10px 10px 0}.messages[_ngcontent-%COMP%]   .message.message-personal[_ngcontent-%COMP%]:before{left:auto;right:0;border-right:none;border-left:5px solid transparent;border-top:4px solid #9ff4ff;bottom:-4px}.messages[_ngcontent-%COMP%]   .message.message-ai[_ngcontent-%COMP%]{float:left;color:#444;text-align:left;border-radius:10px 10px 10px 0}.messages[_ngcontent-%COMP%]   .message.message-ai[_ngcontent-%COMP%]:before{right:auto;left:0;border-left:none;border-right:5px solid transparent;border-top:4px solid #f5f5f5;bottom:-4px}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]:last-child{margin-bottom:30px}.messages[_ngcontent-%COMP%]   .message.new[_ngcontent-%COMP%]{transform:scale(0);transform-origin:0 0;animation:_ngcontent-%COMP%_bounce .5s linear both}.messages[_ngcontent-%COMP%]   .message-personal[_ngcontent-%COMP%], .messages[_ngcontent-%COMP%]   .message-ai[_ngcontent-%COMP%]{float:none;margin-left:0}.messages[_ngcontent-%COMP%]   .message-personal[_ngcontent-%COMP%]{background-color:#9ff4ff;color:#006064;align-self:flex-end;text-align:left}.messages[_ngcontent-%COMP%]   .message-ai[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#212121;align-self:flex-start;text-align:left}.messages[_ngcontent-%COMP%]   .message.new[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce .5s linear both}.messages[_ngcontent-%COMP%]   .message.loading[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);content:"";display:block;width:3px;height:3px;border-radius:50%;background:rgba(0,0,0,.8);z-index:2;margin-top:4px;animation:_ngcontent-%COMP%_ball .45s cubic-bezier(0,0,.15,1) alternate infinite;border:none;animation-delay:.15s}.messages[_ngcontent-%COMP%]   .message.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:0;width:20px;height:10px;position:relative}.messages[_ngcontent-%COMP%]   .message.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);content:"";display:block;width:3px;height:3px;border-radius:50%;background:rgba(0,0,0,.8);z-index:2;margin-top:4px;animation:_ngcontent-%COMP%_ball .45s cubic-bezier(0,0,.15,1) alternate infinite;margin-left:-7px}.messages[_ngcontent-%COMP%]   .message.loading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);content:"";display:block;width:3px;height:3px;border-radius:50%;background:rgba(0,0,0,.8);z-index:2;margin-top:4px;animation:_ngcontent-%COMP%_ball .45s cubic-bezier(0,0,.15,1) alternate infinite;margin-left:7px;animation-delay:.3s}.messages[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]   .messages-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}.message-box[_ngcontent-%COMP%]{flex:0 1 40px;width:100%;background:rgba(0,0,0,.3);padding:10px 20px;position:relative;height:70px;display:flex;gap:10px}.message-box[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{background:white;border-radius:50px;border:none;outline:none!important;resize:none;color:#444;font-size:14px;height:100%;margin:0;display:flex;padding:15px 0 0 20px;width:100%}.message-box[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus:-webkit-placeholder{color:transparent}.message-box[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]{z-index:1;color:#fff;border:none;background-color:#248a52;font-size:14px;text-transform:uppercase;line-height:1;padding:0 20px;border-radius:10px;outline:none!important;transition:background .2s ease}.message-box[_ngcontent-%COMP%]   .message-submit[_ngcontent-%COMP%]:hover{background:#1d7745}.mCSB_scrollTools[_ngcontent-%COMP%]{margin:1px -3px 1px 0;opacity:0}.mCSB_inside[_ngcontent-%COMP%] > .mCSB_container[_ngcontent-%COMP%]{margin-right:0;padding:0 10px}.mCSB_scrollTools[_ngcontent-%COMP%]   .mCSB_dragger[_ngcontent-%COMP%]   .mCSB_dragger_bar[_ngcontent-%COMP%]{background-color:#00000080!important}@keyframes _ngcontent-%COMP%_bounce{0%{transform:scale3d(0,0,1)}4.7%{transform:scale3d(.45,.45,1)}9.41%{transform:scale3d(.883,.883,1)}14.11%{transform:scale3d(1.141,1.141,1)}18.72%{transform:scale3d(1.212,1.212,1)}24.32%{transform:scale3d(1.151,1.151,1)}29.93%{transform:scale3d(1.048,1.048,1)}35.54%{transform:scale3d(.979,.979,1)}41.04%{transform:scale3d(.961,.961,1)}52.15%{transform:scale3d(.991,.991,1)}63.26%{transform:scale3d(1.007,1.007,1)}85.49%{transform:scale3d(.999,.999,1)}to{transform:scaleZ(1)}}@keyframes _ngcontent-%COMP%_ball{0%{transform:translateY(0) scaleY(.8)}to{transform:translateY(-10px)}}.variable-binding[_ngcontent-%COMP%], .variable-textarea[_ngcontent-%COMP%]{width:49%}.variable-binding[_ngcontent-%COMP%]{display:block;float:right}']})}return a})();var X=c(2495),Mt=c(6111),Pt=c(5932),It=c(3023),Jt=c(1086);function Nt(a,s){if(1&a&&(e.TgZ(0,"ul")(1,"li"),e._uU(2),e.qZA()()),2&a){const t=s.$implicit,o=s.index;e.xp6(2),e.AsE("",o+1," - ",t.title,"")}}function Rt(a,s){if(1&a&&(e.TgZ(0,"i"),e._uU(1),e.qZA(),e.TgZ(2,"i"),e._uU(3),e.qZA()),2&a){const t=s.$implicit;e.xp6(1),e.hij(" ",t.event.image_url," "),e.xp6(2),e.AsE("",t.event.extendedProps.user," - ",t.event.title,"")}}function Ht(a,s){if(1&a&&(e.TgZ(0,"full-calendar",11),e.YNc(1,Rt,4,3,"ng-template",null,12,e.W1O),e.qZA()),2&a){const t=e.oxw();e.Q6J("options",t.calendarOptions())}}let Lt=(()=>{class a{constructor(t,o,i){this.changeDetector=t,this.obj=o,this.auth=i,this.COLORS=["#f06292","#ba68c8","#4dd0e1","#aed581","#ffca28"],this.calendarVisible=(0,e.tdS)(!0),this.objectiveSubscription=new f.x,this.calendarOptions=(0,e.tdS)({plugins:[Mt.ZP,Pt.Z,It.Z,Jt.Z],headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listWeek"},initialView:"dayGridMonth",weekends:!0,editable:!1,selectable:!1,selectMirror:!0,dayMaxEvents:!1,select:this.handleDateSelect.bind(this),eventClick:this.handleEventClick.bind(this),eventsSet:this.handleEvents.bind(this)}),this.currentEvents=(0,e.tdS)([]),this.loading=!0}ngOnInit(){this.userId=this.auth.getTokenUserID(),this.getAllobjectivesGoalsUsers()}getAllobjectivesGoalsUsers(){this.loading=!0,this.obj.getRoute("get","objectives",`getObjectiveForCalendar/${this.userId}`).pipe((0,u.R)(this.objectiveSubscription)).subscribe(t=>{const o=this.transformEvents(t.data);this.updateCalendarEvents(o),this.loading=!1},t=>{console.error("Error fetching events",t),this.loading=!1})}transformEvents(t){return t.map(o=>({id:o.id,user:o.users.username,image_url:this.auth.domain+o.users.profile_pic,title:o.goals.goals,start:o.timetable[0],end:o.timetable[1],backgroundColor:o.backgroundColor||this.COLORS[Math.floor(Math.random()*this.COLORS.length)],borderColor:o.backgroundColor||this.COLORS[Math.floor(Math.random()*this.COLORS.length)],allDay:!0}))}updateCalendarEvents(t){this.calendarOptions.update(o=>({...o,events:t}))}ngOnDestroy(){this.objectiveSubscription.unsubscribe()}handleCalendarToggle(){this.calendarVisible.update(t=>!t)}handleWeekendsToggle(){this.calendarOptions.update(t=>({...t,weekends:!t.weekends}))}handleDateSelect(t){}handleEventClick(t){}handleEvents(t){this.currentEvents.set(t),this.changeDetector.detectChanges()}static#e=this.\u0275fac=function(o){return new(o||a)(e.Y36(e.sBO),e.Y36(x.v),e.Y36(v.e))};static#t=this.\u0275cmp=e.Xpm({type:a,selectors:[["app-calendar"]],standalone:!0,features:[e.jDz],decls:16,vars:3,consts:[[1,"grid"],[1,"col-12"],[1,"card"],[1,"add-user-heading"],[1,"text-xl","font-medium","mt-2","text-slate-950"],[1,"demo-app"],[1,"demo-app-sidebar"],[1,"demo-app-sidebar-section"],[4,"ngFor","ngForOf"],[1,"demo-app-main"],[3,"options",4,"ngIf"],[3,"options"],["eventContent",""]],template:function(o,i){1&o&&(e.TgZ(0,"p"),e._uU(1,"calendar works!"),e.qZA(),e.TgZ(2,"div",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"span",4),e._uU(7,"Calendar"),e.qZA(),e.TgZ(8,"div",5)(9,"div",6)(10,"div",7)(11,"h2"),e._uU(12),e.qZA(),e.YNc(13,Nt,3,2,"ul",8),e.qZA()(),e.TgZ(14,"div",9),e.YNc(15,Ht,3,1,"full-calendar",10),e.qZA()()()()()()),2&o&&(e.xp6(12),e.hij("All Events (",i.currentEvents().length,")"),e.xp6(1),e.Q6J("ngForOf",i.currentEvents()),e.xp6(2),e.Q6J("ngIf",i.calendarVisible()))},dependencies:[g.ez,g.sg,g.O5,X.z,X.w],styles:["h2[_ngcontent-%COMP%]{margin:0;font-size:16px}ul[_ngcontent-%COMP%]{margin:0;padding:0 0 0 1.5em}li[_ngcontent-%COMP%]{margin:1.5em 0;padding:0}b[_ngcontent-%COMP%]{margin-right:3px}.demo-app[_ngcontent-%COMP%]{display:flex;min-height:100%;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;font-size:14px}.demo-app-sidebar[_ngcontent-%COMP%]{width:300px;line-height:1.5;background:#eaf9ff;border-right:1px solid #d3e2e8}.demo-app-sidebar-section[_ngcontent-%COMP%]{padding:2em}.demo-app-main[_ngcontent-%COMP%]{flex-grow:1;padding:3em}.fc[_ngcontent-%COMP%]{max-width:1100px;margin:0 auto}.demo-app[_ngcontent-%COMP%]{flex-direction:column-reverse!important}.demo-app-sidebar[_ngcontent-%COMP%]{width:100%!important}"]})}return a})(),Bt=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.oAB({type:a});static#i=this.\u0275inj=e.cJS({imports:[F.Bz.forChild([{path:"",component:M},{path:"dashboard",component:M},{path:"goals",component:Qe},{path:"ai",component:St},{path:"goals/dashboard",component:ot},{path:"goals/objectives",component:Ot},{path:"goals/calendar",component:Lt},{path:"**",redirectTo:"/dashboard"}]),F.Bz]})}return a})();var Et=c(4724);let Qt=(()=>{class a{static#e=this.\u0275fac=function(o){return new(o||a)};static#t=this.\u0275mod=e.oAB({type:a});static#i=this.\u0275inj=e.cJS({providers:[A.p],imports:[Bt,Et.m]})}return a})()}}]);